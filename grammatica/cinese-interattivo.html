<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lezioni Complete di Cinese</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .lesson-selector {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .lesson-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .lesson-card {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .lesson-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .lesson-card p {
            color: #555;
            font-size: 0.9rem;
        }

        .lesson-content {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .lesson-content.active {
            display: block;
        }

        .lesson-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .reading-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .chinese-text {
            font-size: 1.8rem;
            line-height: 1.8;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }

        .pinyin-text {
            font-size: 1.2rem;
            color: #e74c3c;
            margin-bottom: 15px;
            text-align: center;
            font-style: italic;
        }

        .translation {
            font-size: 1.1rem;
            color: #555;
            text-align: center;
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .vocab-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .vocab-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .vocab-character {
            font-size: 3rem;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .vocab-pinyin {
            font-size: 1.3rem;
            color: #e74c3c;
            margin-bottom: 8px;
            font-style: italic;
        }

        .vocab-meaning {
            font-size: 1.1rem;
            color: #555;
            font-weight: 500;
        }

        .dictation-area {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
        }

        .dictation-input {
            width: 100%;
            max-width: 500px;
            padding: 15px;
            font-size: 1.2rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }

        .dictation-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .audio-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .audio-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .feedback {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.wrong {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .progress-container {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
        }

        .score-display {
            text-align: center;
            font-size: 1.2rem;
            color: #2c3e50;
            font-weight: bold;
        }

        .controls {
            text-align: center;
            margin: 30px 0;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
            font-size: 1rem;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .lesson-nav {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 200px;
                margin: 5px 0;
            }
            
            .chinese-text {
                font-size: 1.5rem;
            }
            
            .vocab-character {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üá®üá≥ Lezioni Complete di Cinese</h1>
            <p>Lettura ‚Ä¢ Vocabolario ‚Ä¢ Dettato</p>
        </div>

        <div class="lesson-selector" id="lessonSelector">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">Scegli una Lezione</h2>
            <div class="lesson-grid" id="lessonGrid"></div>
        </div>

        <div class="lesson-content" id="lessonContent">
            <div class="lesson-nav">
                <button class="nav-btn active" onclick="showSection('reading')">üìñ Lettura</button>
                <button class="nav-btn" onclick="showSection('vocabulary')">üìö Vocabolario</button>
                <button class="nav-btn" onclick="showSection('dictation')">‚úçÔ∏è Dettato</button>
                <button class="nav-btn" onclick="showSection('quiz')">üéØ Quiz</button>
            </div>

            <div class="progress-container">
                <div class="score-display">
                    Punteggio: <span id="totalScore">0</span> | Lezione: <span id="currentLessonTitle">-</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <!-- Reading Section -->
            <div class="section active" id="reading">
                <div class="reading-section">
                    <div class="chinese-text" id="chineseText"></div>
                    <div class="pinyin-text" id="pinyinText"></div>
                    <div class="translation" id="translationText"></div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="audio-btn" onclick="playReading()" title="Ascolta la lettura">üîä</button>
                    </div>
                </div>
            </div>

            <!-- Vocabulary Section -->
            <div class="section" id="vocabulary">
                <h3 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">Vocabolario della Lezione</h3>
                <div class="vocab-grid" id="vocabGrid"></div>
            </div>

            <!-- Dictation Section -->
            <div class="section" id="dictation">
                <div class="dictation-area">
                    <h3 style="color: #2c3e50; margin-bottom: 20px;">Dettato</h3>
                    <p style="color: #666; margin-bottom: 20px;">Ascolta e scrivi quello che senti in caratteri cinesi</p>
                    
                    <div>
                        <button class="audio-btn" onclick="playDictation()" title="Riproduci audio">üîä</button>
                        <button class="btn" onclick="playDictation()" style="margin-left: 10px;">Riproduci</button>
                        <button class="btn" onclick="showHint()" style="margin-left: 10px;">üí° Aiuto</button>
                    </div>
                    
                    <input type="text" class="dictation-input" id="dictationInput" placeholder="ÂÜôÊ±âÂ≠ó..." style="font-size: 1.5rem;" />
                    
                    <div id="hintArea" style="margin: 15px 0; padding: 10px; background: #f0f8ff; border-radius: 8px; display: none;">
                        <strong>Suggerimento Pinyin:</strong> <span id="hintText"></span>
                    </div>
                    
                    <div>
                        <button class="btn" onclick="checkDictation()">Controlla</button>
                        <button class="btn" onclick="nextDictation()">Prossima</button>
                    </div>
                    
                    <div class="feedback" id="dictationFeedback"></div>
                </div>
            </div>

            <!-- Quiz Section -->
            <div class="section" id="quiz">
                <div class="dictation-area">
                    <h3 style="color: #2c3e50; margin-bottom: 20px;">Quiz Finale</h3>
                    <div id="quizQuestion"></div>
                    <div id="quizOptions"></div>
                    <div class="feedback" id="quizFeedback"></div>
                    <div style="margin-top: 20px;">
                        <button class="btn" onclick="nextQuiz()">Prossima Domanda</button>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button class="btn" onclick="backToLessons()">‚Üê Torna alle Lezioni</button>
                <button class="btn" onclick="resetLesson()">üîÑ Ricomincia</button>
            </div>
        </div>
    </div>

    <script>
        const lessons = [
            {
                id: 1,
                title: "Primo Incontro",
                level: "Principiante",
                reading: {
                    chinese: "A: ‰Ω†Â•ΩÔºÅÊàëÂè´ÊùéÊòé„ÄÇ‰Ω†Âè´‰ªÄ‰πàÂêçÂ≠óÔºü\nB: ‰Ω†Â•ΩÔºÅÊàëÂè´Áéõ‰∏Ω„ÄÇÂæàÈ´òÂÖ¥ËÆ§ËØÜ‰Ω†„ÄÇ\nA: Êàë‰πüÂæàÈ´òÂÖ¥ËÆ§ËØÜ‰Ω†„ÄÇ‰Ω†ÊòØÂì™ÂõΩ‰∫∫Ôºü\nB: ÊàëÊòØÊÑèÂ§ßÂà©‰∫∫„ÄÇ‰Ω†Âë¢Ôºü\nA: ÊàëÊòØ‰∏≠ÂõΩ‰∫∫„ÄÇ",
                    pinyin: "A: N«ê h«éo! W«í ji√†o L«ê M√≠ng. N«ê ji√†o sh√©nme m√≠ngzi?\nB: N«ê h«éo! W«í ji√†o M«él√¨. Hƒõn gƒÅox√¨ng r√®nshi n«ê.\nA: W«í yƒõ hƒõn gƒÅox√¨ng r√®nshi n«ê. N«ê sh√¨ n«é gu√≥ r√©n?\nB: W«í sh√¨ Y√¨d√†l√¨ r√©n. N«ê ne?\nA: W«í sh√¨ Zh≈çnggu√≥ r√©n.",
                    translation: "A: Ciao! Mi chiamo Li Ming. Come ti chiami?\nB: Ciao! Mi chiamo Maria. Piacere di conoscerti.\nA: Anche io sono felice di conoscerti. Di che nazionalit√† sei?\nB: Sono italiana. E tu?\nA: Sono cinese."
                },
                vocabulary: [
                    { chinese: "‰Ω†Â•Ω", pinyin: "n«ê h«éo", meaning: "ciao" },
                    { chinese: "Âè´", pinyin: "ji√†o", meaning: "chiamarsi" },
                    { chinese: "‰ªÄ‰πà", pinyin: "sh√©nme", meaning: "cosa/che" },
                    { chinese: "ÂêçÂ≠ó", pinyin: "m√≠ngzi", meaning: "nome" },
                    { chinese: "ÂæàÈ´òÂÖ¥", pinyin: "hƒõn gƒÅox√¨ng", meaning: "molto felice" },
                    { chinese: "ËÆ§ËØÜ", pinyin: "r√®nshi", meaning: "conoscere" },
                    { chinese: "Âì™ÂõΩ‰∫∫", pinyin: "n«é gu√≥ r√©n", meaning: "di che nazionalit√†" },
                    { chinese: "ÊÑèÂ§ßÂà©‰∫∫", pinyin: "Y√¨d√†l√¨ r√©n", meaning: "italiano" },
                    { chinese: "‰∏≠ÂõΩ‰∫∫", pinyin: "Zh≈çnggu√≥ r√©n", meaning: "cinese" }
                ],
                dictation: [
                    { chinese: "‰Ω†Â•Ω", pinyin: "n«ê h«éo" },
                    { chinese: "ÊàëÂè´", pinyin: "w«í ji√†o" },
                    { chinese: "‰ªÄ‰πàÂêçÂ≠ó", pinyin: "sh√©nme m√≠ngzi" },
                    { chinese: "ÂæàÈ´òÂÖ¥", pinyin: "hƒõn gƒÅox√¨ng" },
                    { chinese: "ËÆ§ËØÜ‰Ω†", pinyin: "r√®nshi n«ê" }
                ],
                quiz: [
                    {
                        question: "Come si dice 'Come ti chiami?' in cinese?",
                        options: ["‰Ω†Â•ΩÂêóÔºü", "‰Ω†Âè´‰ªÄ‰πàÂêçÂ≠óÔºü", "‰Ω†ÊòØË∞ÅÔºü", "‰Ω†Â§öÂ§ßÔºü"],
                        correct: 1
                    },
                    {
                        question: "Cosa significa 'ÂæàÈ´òÂÖ¥ËÆ§ËØÜ‰Ω†'?",
                        options: ["Come stai?", "Piacere di conoscerti", "Arrivederci", "Grazie"],
                        correct: 1
                    }
                ]
            },
            {
                id: 2,
                title: "Presentare la Famiglia",
                level: "Principiante",
                reading: {
                    chinese: "A: ËøôÊòØÊàëÁöÑÂÆ∂‰∫∫„ÄÇËøôÊòØÊàëÁà∏Áà∏ÔºåËøôÊòØÊàëÂ¶àÂ¶à„ÄÇ\nB: ‰Ω†Áà∏Áà∏ÂÅö‰ªÄ‰πàÂ∑•‰ΩúÔºü\nA: ‰ªñÊòØÂåªÁîü„ÄÇÊàëÂ¶àÂ¶àÊòØËÄÅÂ∏à„ÄÇ\nB: ‰Ω†ÊúâÂÖÑÂºüÂßêÂ¶πÂêóÔºü\nA: ÊúâÔºåÊàëÊúâ‰∏Ä‰∏™Âì•Âì•Âíå‰∏Ä‰∏™Â¶πÂ¶π„ÄÇ‰Ω†Âë¢Ôºü\nB: ÊàëÂè™Êúâ‰∏Ä‰∏™ÂºüÂºü„ÄÇÊàë‰ª¨ÂÆ∂‰∫∫ÈÉΩÂæàÂ•Ω„ÄÇ",
                    pinyin: "A: Zh√® sh√¨ w«í de jiƒÅr√©n. Zh√® sh√¨ w«í b√†ba, zh√® sh√¨ w«í mƒÅma.\nB: N«ê b√†ba zu√≤ sh√©nme g≈çngzu√≤?\nA: TƒÅ sh√¨ yƒ´shƒìng. W«í mƒÅma sh√¨ l«éoshƒ´.\nB: N«ê y«íu xi≈çngd√¨ jiƒõm√®i ma?\nA: Y«íu, w«í y«íu y√≠ ge gƒìge h√© y√≠ ge m√®imei. N«ê ne?\nB: W«í zh«ê y«íu y√≠ ge d√¨di. W«ímen jiƒÅr√©n d≈çu hƒõn h«éo.",
                    translation: "A: Questa √® la mia famiglia. Questo √® mio pap√†, questa √® mia mamma.\nB: Che lavoro fa tuo pap√†?\nA: √à un dottore. Mia mamma √® un'insegnante.\nB: Hai fratelli o sorelle?\nA: S√¨, ho un fratello maggiore e una sorella minore. E tu?\nB: Ho solo un fratello minore. La nostra famiglia sta tutta bene."
                },
                vocabulary: [
                    { chinese: "ÂÆ∂‰∫∫", pinyin: "jiƒÅr√©n", meaning: "famiglia" },
                    { chinese: "Áà∏Áà∏", pinyin: "b√†ba", meaning: "pap√†" },
                    { chinese: "Â¶àÂ¶à", pinyin: "mƒÅma", meaning: "mamma" },
                    { chinese: "Â∑•‰Ωú", pinyin: "g≈çngzu√≤", meaning: "lavoro" },
                    { chinese: "ÂåªÁîü", pinyin: "yƒ´shƒìng", meaning: "dottore" },
                    { chinese: "ËÄÅÂ∏à", pinyin: "l«éoshƒ´", meaning: "insegnante" },
                    { chinese: "Âì•Âì•", pinyin: "gƒìge", meaning: "fratello maggiore" },
                    { chinese: "Â¶πÂ¶π", pinyin: "m√®imei", meaning: "sorella minore" },
                    { chinese: "ÂºüÂºü", pinyin: "d√¨di", meaning: "fratello minore" }
                ],
                dictation: [
                    { chinese: "ÊàëÁöÑÂÆ∂‰∫∫", pinyin: "w«í de jiƒÅr√©n" },
                    { chinese: "ÂÅö‰ªÄ‰πàÂ∑•‰Ωú", pinyin: "zu√≤ sh√©nme g≈çngzu√≤" },
                    { chinese: "‰ªñÊòØÂåªÁîü", pinyin: "tƒÅ sh√¨ yƒ´shƒìng" },
                    { chinese: "ÂÖÑÂºüÂßêÂ¶π", pinyin: "xi≈çngd√¨ jiƒõm√®i" },
                    { chinese: "‰∏Ä‰∏™Âì•Âì•", pinyin: "y√≠ ge gƒìge" }
                ],
                quiz: [
                    {
                        question: "Come si dice 'dottore' in cinese?",
                        options: ["ËÄÅÂ∏à", "ÂåªÁîü", "Â≠¶Áîü", "Â∑•‰∫∫"],
                        correct: 1
                    },
                    {
                        question: "Cosa significa 'ÂÖÑÂºüÂßêÂ¶π'?",
                        options: ["Genitori", "Fratelli e sorelle", "Amici", "Colleghi"],
                        correct: 1
                    }
                ]
            },
            {
                id: 3,
                title: "Al Ristorante",
                level: "Principiante",
                reading: {
                    chinese: "A: ÊúçÂä°ÂëòÔºåÊàë‰ª¨ÊÉ≥ÁÇπËèú„ÄÇ\nB: Â•ΩÁöÑÔºåÊÇ®ÊÉ≥ÂêÉ‰ªÄ‰πàÔºü\nA: ÊàëË¶Å‰∏ÄÁ¢óÁ±≥È•≠Ôºå‰∏Ä‰∏™Ëèú„ÄÇ‰Ω†Êúâ‰ªÄ‰πàÊé®ËçêÂêóÔºü\nB: Êàë‰ª¨ÁöÑÂÆ´‰øùÈ∏°‰∏ÅÂæàÂ•ΩÂêÉ„ÄÇÊÇ®Ë¶ÅÂñù‰ªÄ‰πàÔºü\nA: ÊàëË¶Å‰∏ÄÊùØËå∂„ÄÇÊàëÊúãÂèãË¶ÅÂíñÂï°„ÄÇ\nB: Â•ΩÁöÑÔºåËØ∑Á®çÁ≠â„ÄÇ",
                    pinyin: "A: F√∫w√πyu√°n, w«ímen xi«éng di«én c√†i.\nB: H«éo de, n√≠n xi«éng chƒ´ sh√©nme?\nA: W«í y√†o y√¨ w«én m«êf√†n, y√≠ ge c√†i. N«ê y«íu sh√©nme tuƒ´ji√†n ma?\nB: W«ímen de g≈çngb√†o jƒ´dƒ´ng hƒõn h«éochƒ´. N√≠n y√†o hƒì sh√©nme?\nA: W«í y√†o y√¨ bƒìi ch√°. W«í p√©ngyou y√†o kƒÅfƒìi.\nB: H«éo de, q«êng shƒÅo dƒõng.",
                    translation: "A: Cameriere, vorremmo ordinare.\nB: Bene, cosa desidera mangiare?\nA: Vorrei una ciotola di riso e un piatto. Cosa ci consiglia?\nB: Il nostro pollo kung pao √® molto buono. Cosa desidera bere?\nA: Vorrei una tazza di t√®. Il mio amico vuole un caff√®.\nB: Bene, aspetti un momento."
                },
                vocabulary: [
                    { chinese: "ÊúçÂä°Âëò", pinyin: "f√∫w√πyu√°n", meaning: "cameriere" },
                    { chinese: "ÁÇπËèú", pinyin: "di«én c√†i", meaning: "ordinare" },
                    { chinese: "Á±≥È•≠", pinyin: "m«êf√†n", meaning: "riso" },
                    { chinese: "Êé®Ëçê", pinyin: "tuƒ´ji√†n", meaning: "consigliare" },
                    { chinese: "Â•ΩÂêÉ", pinyin: "h«éochƒ´", meaning: "buono (cibo)" },
                    { chinese: "Ëå∂", pinyin: "ch√°", meaning: "t√®" },
                    { chinese: "ÂíñÂï°", pinyin: "kƒÅfƒìi", meaning: "caff√®" },
                    { chinese: "ÊúãÂèã", pinyin: "p√©ngyou", meaning: "amico" },
                    { chinese: "Á®çÁ≠â", pinyin: "shƒÅo dƒõng", meaning: "aspettare un momento" }
                ],
                dictation: [
                    { chinese: "Êàë‰ª¨ÊÉ≥ÁÇπËèú", pinyin: "w«ímen xi«éng di«én c√†i" },
                    { chinese: "‰∏ÄÁ¢óÁ±≥È•≠", pinyin: "y√¨ w«én m«êf√†n" },
                    { chinese: "‰ªÄ‰πàÊé®Ëçê", pinyin: "sh√©nme tuƒ´ji√†n" },
                    { chinese: "ÂæàÂ•ΩÂêÉ", pinyin: "hƒõn h«éochƒ´" },
                    { chinese: "‰∏ÄÊùØËå∂", pinyin: "y√¨ bƒìi ch√°" }
                ],
                quiz: [
                    {
                        question: "Come si dice 'ordinare' in cinese?",
                        options: ["ÂêÉÈ•≠", "ÁÇπËèú", "ÂñùËå∂", "‰π∞Ëèú"],
                        correct: 1
                    },
                    {
                        question: "Cosa significa 'Â•ΩÂêÉ'?",
                        options: ["Caro", "Buono (sapore)", "Veloce", "Caldo"],
                        correct: 1
                    }
                ]
            },
            {
                id: 4,
                title: "Fare Shopping",
                level: "Intermedio",
                reading: {
                    chinese: "A: ËØ∑ÈóÆÔºåËøô‰ª∂Ë°£ÊúçÂ§öÂ∞ëÈí±Ôºü\nB: Ëøô‰ª∂TÊÅ§Ë°´ÂÖ´ÂçÅÂùóÈí±„ÄÇ\nA: ÊúâÁÇπË¥µ„ÄÇËÉΩ‰æøÂÆú‰∏ÄÁÇπÂêóÔºü\nB: ËøôÂ∑≤ÁªèÊòØÊúÄ‰Ωé‰ª∑‰∫Ü„ÄÇË¥®ÈáèÂæàÂ•ΩÁöÑ„ÄÇ\nA: ÊúâÂÖ∂‰ªñÈ¢úËâ≤ÂêóÔºüÊàë‰∏çÂ§™ÂñúÊ¨¢Á∫¢Ëâ≤„ÄÇ\nB: ÊúâËìùËâ≤ÂíåÁôΩËâ≤ÁöÑ„ÄÇÊÇ®Ë¶ÅËØïËØïÂêóÔºü\nA: Â•ΩÁöÑÔºåÊàëËØïËØïËìùËâ≤ÁöÑ„ÄÇ",
                    pinyin: "A: Q«êng w√®n, zh√® ji√†n yƒ´fu du≈çshao qi√°n?\nB: Zh√® ji√†n T-x√πshƒÅn bƒÅsh√≠ ku√†i qi√°n.\nA: Y«íudi«én gu√¨. N√©ng pi√°nyi y√¨di«én ma?\nB: Zh√® y«êjƒ´ng sh√¨ zu√¨dƒ´ ji√† le. Zh√¨li√†ng hƒõn h«éo de.\nA: Y«íu q√≠tƒÅ y√°ns√® ma? W«í b√π t√†i x«êhuan h√≥ngs√®.\nB: Y«íu l√°ns√® h√© b√°is√® de. N√≠n y√†o sh√¨shi ma?\nA: H«éo de, w«í sh√¨shi l√°ns√® de.",
                    translation: "A: Scusi, quanto costa questo vestito?\nB: Questa maglietta costa ottanta yuan.\nA: √à un po' cara. Pu√≤ fare un po' di sconto?\nB: Questo √® gi√† il prezzo pi√π basso. La qualit√† √® molto buona.\nA: Ci sono altri colori? Non mi piace molto il rosso.\nB: Abbiamo blu e bianco. Vuole provare?\nA: Va bene, provo quello blu."
                },
                vocabulary: [
                    { chinese: "Ë°£Êúç", pinyin: "yƒ´fu", meaning: "vestiti" },
                    { chinese: "Â§öÂ∞ëÈí±", pinyin: "du≈çshao qi√°n", meaning: "quanto costa" },
                    { chinese: "ÂùóÈí±", pinyin: "ku√†i qi√°n", meaning: "yuan (moneta)" },
                    { chinese: "Ë¥µ", pinyin: "gu√¨", meaning: "caro" },
                    { chinese: "‰æøÂÆú", pinyin: "pi√°nyi", meaning: "economico" },
                    { chinese: "Ë¥®Èáè", pinyin: "zh√¨li√†ng", meaning: "qualit√†" },
                    { chinese: "È¢úËâ≤", pinyin: "y√°ns√®", meaning: "colore" },
                    { chinese: "ËìùËâ≤", pinyin: "l√°ns√®", meaning: "blu" },
                    { chinese: "ËØïËØï", pinyin: "sh√¨shi", meaning: "provare" }
                ],
                dictation: [
                    { chinese: "Â§öÂ∞ëÈí±", pinyin: "du≈çshao qi√°n" },
                    { chinese: "ÂÖ´ÂçÅÂùóÈí±", pinyin: "bƒÅsh√≠ ku√†i qi√°n" },
                    { chinese: "ÊúâÁÇπË¥µ", pinyin: "y«íudi«én gu√¨" },
                    { chinese: "ÂÖ∂‰ªñÈ¢úËâ≤", pinyin: "q√≠tƒÅ y√°ns√®" },
                    { chinese: "ËØïËØïÁúã", pinyin: "sh√¨shi k√†n" }
                ],
                quiz: [
                    {
                        question: "Come si dice 'quanto costa?' in cinese?",
                        options: ["Â§öÂ∞ëÈí±Ôºü", "‰ªÄ‰πà‰ª∑Ê†ºÔºü", "Ë¥µ‰∏çË¥µÔºü", "ÊÄé‰πàÂçñÔºü"],
                        correct: 0
                    },
                    {
                        question: "Cosa significa '‰æøÂÆú‰∏ÄÁÇπ'?",
                        options: ["Un po' pi√π caro", "Un po' pi√π economico", "Molto caro", "Gratis"],
                        correct: 1
                    }
                ]
            },
            {
                id: 5,
                title: "Chiedere Indicazioni",
                level: "Intermedio",
                reading: {
                    chinese: "A: ‰∏çÂ•ΩÊÑèÊÄùÔºåËØ∑ÈóÆÈì∂Ë°åÂú®Âì™ÈáåÔºü\nB: Èì∂Ë°åÂ∞±Âú®ÂâçÈù¢ÔºåËøá‰∏§‰∏™Á∫¢ÁªøÁÅØÂ∞±Âà∞‰∫Ü„ÄÇ\nA: Ëµ∞Ë∑ØÈúÄË¶ÅÂ§öÈïøÊó∂Èó¥Ôºü\nB: Â§ßÊ¶ÇÂçÅÂàÜÈíü„ÄÇ‰Ω†‰πüÂèØ‰ª•ÂùêÂÖ¨‰∫§ËΩ¶„ÄÇ\nA: ÂÖ¨‰∫§ËΩ¶Á´ôÂú®Âì™ÈáåÔºü\nB: Â∞±Âú®ÈÇ£ËæπÔºåÁúãÂà∞‰∫ÜÂêóÔºü‰∏âË∑ØËΩ¶ÂèØ‰ª•Âà∞„ÄÇ\nA: Â§™Ë∞¢Ë∞¢‰Ω†‰∫ÜÔºÅ\nB: ‰∏çÂÆ¢Ê∞î„ÄÇ",
                    pinyin: "A: B√π h«éoy√¨si, q«êng w√®n y√≠nh√°ng z√†i n«él«ê?\nB: Y√≠nh√°ng ji√π z√†i qi√°nmian, gu√≤ li«éng ge h√≥ngl«údƒìng ji√π d√†o le.\nA: Z«íul√π x≈´y√†o du≈ç ch√°ng sh√≠jiƒÅn?\nB: D√†g√†i sh√≠ fƒìnzh≈çng. N«ê yƒõ kƒõy«ê zu√≤ g≈çngjiƒÅochƒì.\nA: G≈çngjiƒÅochƒì zh√†n z√†i n«él«ê?\nB: Ji√π z√†i n√†biƒÅn, k√†n d√†o le ma? SƒÅn l√π chƒì kƒõy«ê d√†o.\nA: T√†i xi√®xie n«ê le!\nB: B√π k√®qi.",
                    translation: "A: Scusi, dov'√® la banca?\nB: La banca √® proprio davanti, dopo due semafori ci arriva.\nA: Quanto tempo ci vuole a piedi?\nB: Circa dieci minuti. Pu√≤ anche prendere l'autobus.\nA: Dov'√® la fermata dell'autobus?\nB: √à proprio l√†, la vede? Il numero 3 ci arriva.\nA: La ringrazio molto!\nB: Prego."
                },
                vocabulary: [
                    { chinese: "‰∏çÂ•ΩÊÑèÊÄù", pinyin: "b√π h«éoy√¨si", meaning: "scusi" },
                    { chinese: "Èì∂Ë°å", pinyin: "y√≠nh√°ng", meaning: "banca" },
                    { chinese: "ÂâçÈù¢", pinyin: "qi√°nmian", meaning: "davanti" },
                    { chinese: "Á∫¢ÁªøÁÅØ", pinyin: "h√≥ngl«údƒìng", meaning: "semaforo" },
                    { chinese: "Ëµ∞Ë∑Ø", pinyin: "z«íul√π", meaning: "camminare" },
                    { chinese: "Êó∂Èó¥", pinyin: "sh√≠jiƒÅn", meaning: "tempo" },
                    { chinese: "ÂÖ¨‰∫§ËΩ¶", pinyin: "g≈çngjiƒÅochƒì", meaning: "autobus" },
                    { chinese: "ËΩ¶Á´ô", pinyin: "chƒìzh√†n", meaning: "fermata" },
                    { chinese: "Ë∞¢Ë∞¢", pinyin: "xi√®xie", meaning: "grazie" }
                ],
                dictation: [
                    { chinese: "Èì∂Ë°åÂú®Âì™Èáå", pinyin: "y√≠nh√°ng z√†i n«él«ê" },
                    { chinese: "Â∞±Âú®ÂâçÈù¢", pinyin: "ji√π z√†i qi√°nmian" },
                    { chinese: "Â§öÈïøÊó∂Èó¥", pinyin: "du≈ç ch√°ng sh√≠jiƒÅn" },
                    { chinese: "ÂùêÂÖ¨‰∫§ËΩ¶", pinyin: "zu√≤ g≈çngjiƒÅochƒì" },
                    { chinese: "Â§™Ë∞¢Ë∞¢‰∫Ü", pinyin: "t√†i xi√®xie le" }
                ],
                quiz: [
                    {
                        question: "Come si dice 'scusi' in cinese?",
                        options: ["ÂØπ‰∏çËµ∑", "‰∏çÂ•ΩÊÑèÊÄù", "ËØ∑ÈóÆ", "Ë∞¢Ë∞¢"],
                        correct: 1
                    },
                    {
                        question: "Cosa significa 'Á∫¢ÁªøÁÅØ'?",
                        options: ["Strada", "Semaforo", "Macchina", "Ponte"],
                        correct: 1
                    }
                ]
            }
        ];

        let currentLesson = null;
        let currentSection = 'reading';
        let dictationIndex = 0;
        let quizIndex = 0;
        let totalScore = 0;
        let audioContext;

        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            return audioContext;
        }

        function playTone(frequency, duration = 0.5) {
            try {
                const ctx = initAudioContext();
                const oscillator = ctx.createOscillator();
                const gainNode = ctx.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(ctx.destination);
                
                oscillator.frequency.setValueAtTime(frequency, ctx.currentTime);
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, ctx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);
                
                oscillator.start(ctx.currentTime);
                oscillator.stop(ctx.currentTime + duration);
                
                return true;
            } catch (error) {
                return false;
            }
        }

        function playAudio(text) {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-CN';
                utterance.rate = 0.7;
                utterance.pitch = 1.0;
                
                let speechStarted = false;
                let fallbackTimer = setTimeout(() => {
                    if (!speechStarted) {
                        playTone(440, 0.5);
                    }
                }, 500);
                
                utterance.onstart = () => {
                    speechStarted = true;
                    clearTimeout(fallbackTimer);
                };
                
                utterance.onerror = () => {
                    clearTimeout(fallbackTimer);
                    playTone(440, 0.5);
                };
                
                speechSynthesis.speak(utterance);
            } else {
                playTone(440, 0.5);
            }
        }

        function initApp() {
            loadLessonSelector();
            updateScore();
        }

        function loadLessonSelector() {
            const grid = document.getElementById('lessonGrid');
            grid.innerHTML = '';
            
            lessons.forEach(lesson => {
                const card = document.createElement('div');
                card.className = 'lesson-card';
                card.onclick = () => startLesson(lesson.id);
                
                card.innerHTML = `
                    <h3>${lesson.title}</h3>
                    <p>Livello: ${lesson.level}</p>
                    <p>${lesson.vocabulary.length} parole ‚Ä¢ Lettura ‚Ä¢ Dettato ‚Ä¢ Quiz</p>
                `;
                
                grid.appendChild(card);
            });
        }

        function startLesson(lessonId) {
            currentLesson = lessons.find(l => l.id === lessonId);
            document.getElementById('lessonSelector').style.display = 'none';
            document.getElementById('lessonContent').classList.add('active');
            document.getElementById('currentLessonTitle').textContent = currentLesson.title;
            
            loadReading();
            loadVocabulary();
            resetDictation();
            resetQuiz();
            showSection('reading');
        }

        function showSection(sectionName) {
            // Update nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show section
            document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
            document.getElementById(sectionName).classList.add('active');
            
            currentSection = sectionName;
        }

        function loadReading() {
            const reading = currentLesson.reading;
            document.getElementById('chineseText').textContent = reading.chinese;
            document.getElementById('pinyinText').textContent = reading.pinyin;
            document.getElementById('translationText').textContent = reading.translation;
        }

        function loadVocabulary() {
            const grid = document.getElementById('vocabGrid');
            grid.innerHTML = '';
            
            currentLesson.vocabulary.forEach(word => {
                const card = document.createElement('div');
                card.className = 'vocab-card';
                card.onclick = () => playAudio(word.pinyin);
                
                card.innerHTML = `
                    <div class="vocab-character">${word.chinese}</div>
                    <div class="vocab-pinyin">${word.pinyin}</div>
                    <div class="vocab-meaning">${word.meaning}</div>
                `;
                
                grid.appendChild(card);
            });
        }

        function playReading() {
            playAudio(currentLesson.reading.pinyin);
        }

        function resetDictation() {
            dictationIndex = 0;
            document.getElementById('dictationInput').value = '';
            document.getElementById('dictationFeedback').textContent = '';
            document.getElementById('dictationFeedback').className = 'feedback';
            document.getElementById('hintArea').style.display = 'none';
        }

        function playDictation() {
            if (dictationIndex < currentLesson.dictation.length) {
                const dictationItem = currentLesson.dictation[dictationIndex];
                playAudio(dictationItem.pinyin);
            }
        }

        function showHint() {
            if (dictationIndex < currentLesson.dictation.length) {
                const dictationItem = currentLesson.dictation[dictationIndex];
                document.getElementById('hintText').textContent = dictationItem.pinyin;
                document.getElementById('hintArea').style.display = 'block';
            }
        }

        function checkDictation() {
            const input = document.getElementById('dictationInput').value.trim();
            const dictationItem = currentLesson.dictation[dictationIndex];
            const correct = dictationItem.chinese;
            const feedback = document.getElementById('dictationFeedback');
            
            if (input === correct) {
                feedback.innerHTML = `Ê≠£Á°Æ! Corretto! üéâ<br><small>Pinyin: ${dictationItem.pinyin}</small>`;
                feedback.className = 'feedback correct';
                totalScore += 10;
                updateScore();
            } else {
                feedback.innerHTML = `Sbagliato. La risposta corretta √®: <strong>${correct}</strong><br><small>Pinyin: ${dictationItem.pinyin}</small>`;
                feedback.className = 'feedback wrong';
            }
        }

        function nextDictation() {
            dictationIndex++;
            if (dictationIndex >= currentLesson.dictation.length) {
                dictationIndex = 0;
            }
            document.getElementById('dictationInput').value = '';
            document.getElementById('dictationFeedback').textContent = '';
            document.getElementById('dictationFeedback').className = 'feedback';
            document.getElementById('hintArea').style.display = 'none';
        }

        function resetQuiz() {
            quizIndex = 0;
            loadQuizQuestion();
        }

        function loadQuizQuestion() {
            if (quizIndex >= currentLesson.quiz.length) {
                document.getElementById('quizQuestion').innerHTML = '<h4>Quiz completato! üèÜ</h4>';
                document.getElementById('quizOptions').innerHTML = '';
                return;
            }
            
            const question = currentLesson.quiz[quizIndex];
            document.getElementById('quizQuestion').innerHTML = `<h4>${question.question}</h4>`;
            
            const optionsDiv = document.getElementById('quizOptions');
            optionsDiv.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'btn';
                btn.style.margin = '10px';
                btn.style.fontSize = '1.2rem';
                btn.textContent = option;
                btn.onclick = () => checkQuizAnswer(index);
                optionsDiv.appendChild(btn);
            });
        }

        function checkQuizAnswer(selectedIndex) {
            const question = currentLesson.quiz[quizIndex];
            const feedback = document.getElementById('quizFeedback');
            
            if (selectedIndex === question.correct) {
                feedback.textContent = 'Ê≠£Á°Æ! Corretto! üéâ';
                feedback.className = 'feedback correct';
                totalScore += 20;
                updateScore();
            } else {
                feedback.textContent = `Sbagliato. La risposta corretta √®: ${question.options[question.correct]}`;
                feedback.className = 'feedback wrong';
            }
        }

        function nextQuiz() {
            quizIndex++;
            document.getElementById('quizFeedback').textContent = '';
            document.getElementById('quizFeedback').className = 'feedback';
            loadQuizQuestion();
        }

        function updateScore() {
            document.getElementById('totalScore').textContent = totalScore;
            const maxScore = lessons.length * 50; // Approximate max score
            const progress = Math.min((totalScore / maxScore) * 100, 100);
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function backToLessons() {
            document.getElementById('lessonSelector').style.display = 'block';
            document.getElementById('lessonContent').classList.remove('active');
            currentLesson = null;
        }

        function resetLesson() {
            if (currentLesson) {
                resetDictation();
                resetQuiz();
                showSection('reading');
            }
        }

        // Initialize the app
        initApp();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9634a001c5cacb8b',t:'MTc1MzIwNDk5Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
<button class="inline-flex items-center justify-center rounded-md px-4 py-2 text-base text-white font-semibold shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 bg-gradient-to-r from-red-500 to-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 active:transform active:scale-95"><a href="https://scottino2019-glitch.github.io/lingua-cinese/grammatica.html"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
</svg> Indietro </a></button>
</html>
