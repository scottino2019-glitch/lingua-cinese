<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pratica Cinese - Calligrafia e Caratteri</title>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #ff9a56 0%, #ff6b95 100%);
            min-height: 100%;
        }
        
        html, body {
            height: 100%;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #d63031, #e17055);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 380px 1fr;
            gap: 0;
            min-height: 600px;
        }
        
        .sidebar {
            background: #f8f9fa;
            padding: 20px;
            border-right: 2px solid #e9ecef;
            overflow-y: auto;
            max-height: 80vh;
        }
        
        .section {
            margin-bottom: 25px;
        }
        
        .section h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .category-btn {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 0.9rem;
            margin-bottom: 8px;
            width: 100%;
            display: block;
        }
        
        .category-btn:hover {
            border-color: #d63031;
            background: #fff5f5;
        }
        
        .category-btn.active {
            background: #d63031;
            color: white;
            border-color: #d63031;
        }
        
        .character-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 6px;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .character-btn {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            padding: 8px 4px;
            font-size: 1.4rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: bold;
            min-height: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            font-family: 'SimSun', 'Microsoft YaHei', serif;
        }
        
        .character-btn:hover {
            border-color: #d63031;
            background: #fff5f5;
            transform: translateY(-1px);
        }
        
        .character-btn.active {
            background: #d63031;
            color: white;
            border-color: #d63031;
        }
        
        .pinyin {
            font-size: 0.6rem;
            opacity: 0.8;
            margin-top: 2px;
            font-family: 'Segoe UI', sans-serif;
        }
        
        .canvas-area {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .current-exercise {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #d63031;
        }
        
        .exercise-display {
            font-size: 4rem;
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            color: #495057;
            font-family: 'SimSun', 'Microsoft YaHei', serif;
        }
        
        .exercise-info {
            text-align: center;
            color: #6c757d;
            font-size: 1.1rem;
        }
        
        .character-details {
            background: #e3f2fd;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            text-align: center;
            border: 2px solid #2196f3;
        }
        
        .detail-row {
            margin: 5px 0;
            font-size: 1rem;
        }
        
        .detail-label {
            font-weight: 600;
            color: #1976d2;
        }
        
        .canvas-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        #drawingCanvas {
            border: 3px solid #dee2e6;
            border-radius: 8px;
            cursor: crosshair;
            background: #fafafa;
        }
        
        .canvas-controls {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 16px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            min-width: 80px;
        }
        
        .control-btn:hover {
            background: #495057;
            transform: translateY(-1px);
        }
        
        .control-btn:active {
            transform: translateY(0);
        }
        
        .clear-btn {
            background: #dc3545;
        }
        
        .clear-btn:hover {
            background: #c82333;
        }
        
        .draw-btn {
            background: #28a745;
        }
        
        .draw-btn:hover {
            background: #218838;
        }
        
        .draw-btn.active {
            background: #155724;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .stop-btn {
            background: #fd7e14;
        }
        
        .stop-btn:hover {
            background: #e8690b;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                border-right: none;
                border-bottom: 2px solid #e9ecef;
                padding: 15px;
                max-height: none;
            }
            
            .character-grid {
                grid-template-columns: repeat(8, 1fr);
                gap: 4px;
                max-height: 200px;
            }
            
            .character-btn {
                padding: 6px 2px;
                font-size: 1.1rem;
                min-height: 40px;
            }
            
            .canvas-area {
                padding: 15px;
            }
            
            #drawingCanvas {
                width: 100%;
                max-width: 400px;
                height: 300px;
            }
            
            .exercise-display {
                font-size: 2.5rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .control-btn {
                padding: 10px 12px;
                font-size: 0.8rem;
                min-width: 70px;
            }
        }
        
        @media (max-width: 480px) {
            .character-grid {
                grid-template-columns: repeat(6, 1fr);
            }
            
            .canvas-controls {
                gap: 5px;
            }
            
            .control-btn {
                padding: 8px 10px;
                font-size: 0.75rem;
                min-width: 60px;
            }
            
            .exercise-display {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üá®üá≥ Pratica Cinese</h1>
            <p>Calligrafia e Caratteri Tradizionali</p>
        </div>
        
        <div class="main-content">
            <div class="sidebar">
                <div class="section">
                    <h3>üìö Categorie</h3>
                    <button class="category-btn" onclick="showCategory('hsk1')">HSK Livello 1 (150 caratteri)</button>
                    <button class="category-btn" onclick="showCategory('hsk2')">HSK Livello 2 (150 caratteri)</button>
                    <button class="category-btn" onclick="showCategory('hsk3')">HSK Livello 3 (300 caratteri)</button>
                    <button class="category-btn" onclick="showCategory('radicals')">Radicali Fondamentali</button>
                    <button class="category-btn" onclick="showCategory('numbers')">Numeri e Contatori</button>
                    <button class="category-btn" onclick="showCategory('family')">Famiglia e Persone</button>
                    <button class="category-btn" onclick="showCategory('nature')">Natura e Elementi</button>
                    <button class="category-btn" onclick="showCategory('body')">Corpo Umano</button>
                    <button class="category-btn" onclick="showCategory('time')">Tempo e Date</button>
                    <button class="category-btn" onclick="showCategory('food')">Cibo e Bevande</button>
                    <button class="category-btn" onclick="showCategory('colors')">Colori e Forme</button>
                    <button class="category-btn" onclick="showCategory('actions')">Azioni e Verbi</button>
                </div>
                
                <div class="character-grid" id="characterGrid">
                    <div style="grid-column: 1/-1; text-align: center; color: #6c757d; padding: 20px;">
                        Seleziona una categoria per vedere i caratteri
                    </div>
                </div>
            </div>
            
            <div class="canvas-area">
                <div class="current-exercise">
                    <div class="exercise-info">Carattere Corrente:</div>
                    <div class="exercise-display" id="currentDisplay">ÈÄâÊã©Â≠óÁ¨¶</div>
                    <div class="character-details" id="characterDetails" style="display: none;">
                        <div class="detail-row"><span class="detail-label">Pinyin:</span> <span id="currentPinyin">-</span></div>
                        <div class="detail-row"><span class="detail-label">Significato:</span> <span id="currentMeaning">-</span></div>
                        <div class="detail-row"><span class="detail-label">Tratti:</span> <span id="currentStrokes">-</span></div>
                    </div>
                </div>
                
                <div class="canvas-container">
                    <canvas id="drawingCanvas" width="500" height="400"></canvas>
                    <div class="canvas-controls">
                        <button class="control-btn draw-btn" id="drawBtn" onclick="toggleDrawing()">üñåÔ∏è Inizia</button>
                        <button class="control-btn stop-btn" onclick="stopDrawing()" style="display: none;" id="stopBtn">‚èπÔ∏è Stop</button>
                        <button class="control-btn clear-btn" onclick="clearCanvas()">üóëÔ∏è Cancella</button>
                        <button class="control-btn" onclick="changeStrokeWidth(2)">Sottile</button>
                        <button class="control-btn" onclick="changeStrokeWidth(5)">Medio</button>
                        <button class="control-btn" onclick="changeStrokeWidth(8)">Spesso</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Database caratteri cinesi organizzati per categoria
        const chineseCharacters = {
            hsk1: [
                { char: 'Êàë', pinyin: 'w«í', meaning: 'io', strokes: 7 },
                { char: '‰Ω†', pinyin: 'n«ê', meaning: 'tu', strokes: 7 },
                { char: '‰ªñ', pinyin: 'tƒÅ', meaning: 'lui', strokes: 5 },
                { char: 'Â•π', pinyin: 'tƒÅ', meaning: 'lei', strokes: 6 },
                { char: 'Â•Ω', pinyin: 'h«éo', meaning: 'bene/buono', strokes: 6 },
                { char: 'ÊòØ', pinyin: 'sh√¨', meaning: 'essere', strokes: 9 },
                { char: '‰∏ç', pinyin: 'b√π', meaning: 'non', strokes: 4 },
                { char: 'Êúâ', pinyin: 'y«íu', meaning: 'avere', strokes: 6 },
                { char: 'Âú®', pinyin: 'z√†i', meaning: 'essere in', strokes: 6 },
                { char: '‰∫∫', pinyin: 'r√©n', meaning: 'persona', strokes: 2 },
                { char: '‰∏≠', pinyin: 'zh≈çng', meaning: 'centro/Cina', strokes: 4 },
                { char: 'ÂõΩ', pinyin: 'gu√≥', meaning: 'paese', strokes: 8 },
                { char: 'Â§ß', pinyin: 'd√†', meaning: 'grande', strokes: 3 },
                { char: 'Â∞è', pinyin: 'xi«éo', meaning: 'piccolo', strokes: 3 },
                { char: 'Êù•', pinyin: 'l√°i', meaning: 'venire', strokes: 7 },
                { char: 'Âéª', pinyin: 'q√π', meaning: 'andare', strokes: 5 },
                { char: 'ËØ¥', pinyin: 'shu≈ç', meaning: 'dire', strokes: 9 },
                { char: 'Áúã', pinyin: 'k√†n', meaning: 'guardare', strokes: 9 },
                { char: 'Âê¨', pinyin: 'tƒ´ng', meaning: 'sentire', strokes: 7 },
                { char: 'ÂêÉ', pinyin: 'chƒ´', meaning: 'mangiare', strokes: 6 },
                { char: 'Âñù', pinyin: 'hƒì', meaning: 'bere', strokes: 12 },
                { char: '‰π∞', pinyin: 'm«éi', meaning: 'comprare', strokes: 6 },
                { char: 'Âçñ', pinyin: 'm√†i', meaning: 'vendere', strokes: 8 },
                { char: 'Â≠¶', pinyin: 'xu√©', meaning: 'studiare', strokes: 8 },
                { char: 'Â∑•', pinyin: 'g≈çng', meaning: 'lavoro', strokes: 3 },
                { char: '‰Ωú', pinyin: 'zu√≤', meaning: 'fare', strokes: 7 },
                { char: 'ÂÆ∂', pinyin: 'jiƒÅ', meaning: 'casa/famiglia', strokes: 10 },
                { char: 'Â≠¶', pinyin: 'xu√©', meaning: 'scuola', strokes: 8 },
                { char: 'ËÄÅ', pinyin: 'l«éo', meaning: 'vecchio', strokes: 6 },
                { char: 'Â∏à', pinyin: 'shƒ´', meaning: 'maestro', strokes: 6 },
{ char: '‰∫∫', pinyin: 'r√©n', meaning: 'persona', strokes: 2 },
{ char: '‰Ω†', pinyin: 'n«ê', meaning: 'tu/voi', strokes: 7 },
{ char: 'Êàë', pinyin: 'w«í', meaning: 'io', strokes: 7 },
{ char: '‰ªñ', pinyin: 'tƒÅ', meaning: 'lui', strokes: 5 },
{ char: 'Â•π', pinyin: 'tƒÅ', meaning: 'lei', strokes: 6 },
{ char: '‰ª¨', pinyin: 'men', meaning: 'pluralit√† (persone)', strokes: 5 },
{ char: 'ÊòØ', pinyin: 'sh√¨', meaning: 'essere', strokes: 9 },
{ char: '‰∏ç', pinyin: 'b√π', meaning: 'non', strokes: 4 },
{ char: 'Âú®', pinyin: 'z√†i', meaning: 'stare, trovarsi', strokes: 6 },
{ char: 'Êúâ', pinyin: 'y«íu', meaning: 'avere', strokes: 6 },
{ char: 'Ê≤°', pinyin: 'm√©i', meaning: 'non avere', strokes: 7 },
{ char: 'Â•Ω', pinyin: 'h«éo', meaning: 'bene, buono', strokes: 6 },
{ char: 'Â§ß', pinyin: 'd√†', meaning: 'grande', strokes: 3 },
{ char: 'Â∞è', pinyin: 'xi«éo', meaning: 'piccolo', strokes: 3 },
{ char: 'Â§ö', pinyin: 'du≈ç', meaning: 'molto', strokes: 6 },
{ char: 'Â∞ë', pinyin: 'sh«éo', meaning: 'poco', strokes: 4 },
{ char: 'Â§©', pinyin: 'tiƒÅn', meaning: 'cielo, giorno', strokes: 4 },
{ char: 'Êúà', pinyin: 'yu√®', meaning: 'luna, mese', strokes: 4 },
{ char: 'Êó•', pinyin: 'r√¨', meaning: 'sole, giorno', strokes: 4 },
{ char: 'Âπ¥', pinyin: 'ni√°n', meaning: 'anno', strokes: 6 },
{ char: 'Ê∞¥', pinyin: 'shu«ê', meaning: 'acqua', strokes: 4 },
{ char: 'ÁÅ´', pinyin: 'hu«í', meaning: 'fuoco', strokes: 4 },
{ char: 'Â±±', pinyin: 'shƒÅn', meaning: 'montagna', strokes: 3 },
{ char: 'Â•≥', pinyin: 'n«ö', meaning: 'donna', strokes: 3 },
{ char: 'Áî∑', pinyin: 'n√°n', meaning: 'uomo', strokes: 7 },
{ char: 'Â≠ê', pinyin: 'z«ê', meaning: 'figlio', strokes: 3 },
{ char: 'ÊúãÂèã', pinyin: 'p√©ngyou', meaning: 'amico', strokes: 8 },
{ char: 'Â≠¶Ê†°', pinyin: 'xu√©xi√†o', meaning: 'scuola', strokes: 16 },
{ char: 'ËÄÅÂ∏à', pinyin: 'l«éoshƒ´', meaning: 'insegnante', strokes: 12 },
{ char: '‰∏Ä', pinyin: 'yƒ´', meaning: 'uno', strokes: 1 },
{ char: '‰∫å', pinyin: '√®r', meaning: 'due', strokes: 2 },
{ char: '‰∏â', pinyin: 'sƒÅn', meaning: 'tre', strokes: 3 },
{ char: 'Âõõ', pinyin: 's√¨', meaning: 'quattro', strokes: 5 },
{ char: '‰∫î', pinyin: 'w«î', meaning: 'cinque', strokes: 4 },
{ char: 'ÂÖ≠', pinyin: 'li√π', meaning: 'sei', strokes: 4 },
{ char: '‰∏É', pinyin: 'qƒ´', meaning: 'sette', strokes: 2 },
{ char: 'ÂÖ´', pinyin: 'bƒÅ', meaning: 'otto', strokes: 2 },
{ char: '‰πù', pinyin: 'ji«î', meaning: 'nove', strokes: 2 },
{ char: 'ÂçÅ', pinyin: 'sh√≠', meaning: 'dieci', strokes: 2 },
{ char: 'Ëøô', pinyin: 'zh√®', meaning: 'questo', strokes: 7 },
{ char: 'ÈÇ£', pinyin: 'n√†', meaning: 'quello', strokes: 6 },
{ char: 'Âì™', pinyin: 'n«é', meaning: 'quale', strokes: 9 },
{ char: 'Ë∞Å', pinyin: 'sh√©i', meaning: 'chi', strokes: 10 },
{ char: '‰ªÄ‰πà', pinyin: 'sh√©nme', meaning: 'cosa/che', strokes: 10 },
{ char: 'Âêó', pinyin: 'ma', meaning: 'particella interrogativa', strokes: 6 },
{ char: 'Âë¢', pinyin: 'ne', meaning: 'particella interrogativa', strokes: 8 },
{ char: 'Âíå', pinyin: 'h√©', meaning: 'e', strokes: 8 },
{ char: 'ÁöÑ', pinyin: 'de', meaning: 'particella possessiva', strokes: 8 },
{ char: '‰ª¨', pinyin: 'men', meaning: 'plurale persone', strokes: 5 },
{ char: 'Âú®', pinyin: 'z√†i', meaning: 'essere/stare/trovarsi', strokes: 6 },
{ char: 'Áà±', pinyin: '√†i', meaning: 'amare', strokes: 10 },
{ char: 'ÂêÉ', pinyin: 'chƒ´', meaning: 'mangiare', strokes: 6 },
{ char: 'Âñù', pinyin: 'hƒì', meaning: 'bere', strokes: 12 },
{ char: 'ËØª', pinyin: 'd√∫', meaning: 'leggere', strokes: 10 },
{ char: 'Â∑•‰Ωú', pinyin: 'g≈çngzu√≤', meaning: 'lavorare', strokes: 10 + 7 },
{ char: 'Âè´', pinyin: 'ji√†o', meaning: 'chiamare', strokes: 5 },
{ char: 'ÂºÄ', pinyin: 'kƒÅi', meaning: 'aprire', strokes: 4 },
{ char: 'Áúã', pinyin: 'k√†n', meaning: 'guardare', strokes: 9 },
{ char: 'Êù•', pinyin: 'l√°i', meaning: 'venire', strokes: 7 },
{ char: '‰π∞', pinyin: 'm«éi', meaning: 'comprare', strokes: 6 },
{ char: 'Âéª', pinyin: 'q√π', meaning: 'andare', strokes: 5 },
{ char: 'Áù°Ëßâ', pinyin: 'shu√¨ji√†o', meaning: 'dormire', strokes: 13 + 9 },
{ char: 'ÂÜô', pinyin: 'xiƒõ', meaning: 'scrivere', strokes: 5 },
{ char: 'ËØ¥', pinyin: 'shu≈ç', meaning: 'parlare/dire', strokes: 9 },
{ char: 'Âê¨', pinyin: 'tƒ´ng', meaning: 'ascoltare', strokes: 7 },
{ char: 'ÂñúÊ¨¢', pinyin: 'x«êhuan', meaning: 'piacere', strokes: 12 + 6 },
{ char: 'Â≠¶‰π†', pinyin: 'xu√©x√≠', meaning: 'studiare', strokes: 8 + 11 },
{ char: 'Êúâ', pinyin: 'y«íu', meaning: 'avere', strokes: 6 },
{ char: 'Âùê', pinyin: 'zu√≤', meaning: 'sedersi', strokes: 7 },
{ char: '‰Ωè', pinyin: 'zh√π', meaning: 'abitare', strokes: 7 },
{ char: 'ËÆ§ËØÜ', pinyin: 'r√®nshi', meaning: 'conoscere', strokes: 6 + 4 },
{ char: 'Âõû', pinyin: 'hu√≠', meaning: 'tornare', strokes: 6 },
{ char: 'ÊòØ', pinyin: 'sh√¨', meaning: 'essere', strokes: 9 },
{ char: '‰∏ç', pinyin: 'b√π', meaning: 'non', strokes: 4 },
{ char: 'Âæà', pinyin: 'hƒõn', meaning: 'molto', strokes: 9 },
{ char: '‰πü', pinyin: 'yƒõ', meaning: 'anche', strokes: 3 },
{ char: 'ÈÉΩ', pinyin: 'd≈çu', meaning: 'tutti', strokes: 10 },
{ char: 'Â§™', pinyin: 't√†i', meaning: 'troppo', strokes: 4 },
{ char: 'ÂÜç', pinyin: 'z√†i', meaning: 'di nuovo/ancora', strokes: 6 },
{ char: 'Â§ö', pinyin: 'du≈ç', meaning: 'molto', strokes: 6 },
{ char: 'Â∞ë', pinyin: 'sh«éo', meaning: 'poco', strokes: 4 }
            ],
            
            hsk2: [
                { char: '‰ºö', pinyin: 'hu√¨', meaning: 'saper fare', strokes: 6 },
                { char: 'ËÉΩ', pinyin: 'n√©ng', meaning: 'potere', strokes: 10 },
                { char: 'ÂèØ', pinyin: 'kƒõ', meaning: 'potere', strokes: 5 },
                { char: '‰ª•', pinyin: 'y«ê', meaning: 'con/per', strokes: 4 },
                { char: 'Ë¶Å', pinyin: 'y√†o', meaning: 'volere', strokes: 9 },
                { char: 'ÊÉ≥', pinyin: 'xi«éng', meaning: 'pensare', strokes: 13 },
                { char: 'Áü•', pinyin: 'zhƒ´', meaning: 'sapere', strokes: 8 },
                { char: 'ÈÅì', pinyin: 'd√†o', meaning: 'via/sapere', strokes: 12 },
                { char: 'Ëßâ', pinyin: 'ju√©', meaning: 'sentire', strokes: 9 },
                { char: 'Âæó', pinyin: 'de', meaning: 'ottenere', strokes: 11 },
                { char: 'Áªô', pinyin: 'gƒõi', meaning: 'dare', strokes: 9 },
                { char: 'ËÆ©', pinyin: 'r√†ng', meaning: 'lasciare', strokes: 5 },
                { char: 'Êää', pinyin: 'b«é', meaning: 'prendere', strokes: 7 },
                { char: 'Ë¢´', pinyin: 'b√®i', meaning: 'essere (passivo)', strokes: 10 },
                { char: '‰ªé', pinyin: 'c√≥ng', meaning: 'da', strokes: 4 },
                { char: 'Âà∞', pinyin: 'd√†o', meaning: 'arrivare', strokes: 8 },
                { char: '‰∏∫', pinyin: 'w√®i', meaning: 'per', strokes: 4 },
                { char: '‰∫Ü', pinyin: 'le', meaning: 'particella', strokes: 2 },
                { char: 'ÁùÄ', pinyin: 'zhe', meaning: 'particella', strokes: 11 },
                { char: 'Ëøá', pinyin: 'gu√≤', meaning: 'passare', strokes: 6 }
            ],
            
            hsk3: [
                { char: 'Â∫î', pinyin: 'yƒ´ng', meaning: 'dovere', strokes: 7 },
                { char: 'ËØ•', pinyin: 'gƒÅi', meaning: 'dovere', strokes: 8 },
                { char: 'ÂøÖ', pinyin: 'b√¨', meaning: 'dovere', strokes: 5 },
                { char: 'È°ª', pinyin: 'x≈´', meaning: 'dovere', strokes: 9 },
                { char: 'ÈúÄ', pinyin: 'x≈´', meaning: 'aver bisogno', strokes: 14 },
                { char: 'Â∏å', pinyin: 'xƒ´', meaning: 'sperare', strokes: 7 },
                { char: 'Êúõ', pinyin: 'w√†ng', meaning: 'sperare', strokes: 11 },
                { char: 'ÊÑø', pinyin: 'yu√°n', meaning: 'desiderare', strokes: 14 },
                { char: 'ÊÑè', pinyin: 'y√¨', meaning: 'significato', strokes: 13 },
                { char: 'ÊÄù', pinyin: 'sƒ´', meaning: 'pensare', strokes: 9 },
                { char: 'ËÄÉ', pinyin: 'k«éo', meaning: 'esaminare', strokes: 6 },
                { char: 'Ëôë', pinyin: 'l«ú', meaning: 'considerare', strokes: 10 },
                { char: 'ÂÜ≥', pinyin: 'ju√©', meaning: 'decidere', strokes: 6 },
                { char: 'ÂÆö', pinyin: 'd√¨ng', meaning: 'decidere', strokes: 8 },
                { char: 'ÈÄâ', pinyin: 'xu«én', meaning: 'scegliere', strokes: 9 },
                { char: 'Êã©', pinyin: 'z√©', meaning: 'scegliere', strokes: 8 },
                { char: 'ÊØî', pinyin: 'b«ê', meaning: 'confrontare', strokes: 4 },
                { char: 'ËæÉ', pinyin: 'ji√†o', meaning: 'confrontare', strokes: 10 },
                { char: 'Êõ¥', pinyin: 'g√®ng', meaning: 'pi√π', strokes: 7 },
                { char: 'ÊúÄ', pinyin: 'zu√¨', meaning: 'il pi√π', strokes: 12 }
            ],
            
            radicals: [
                { char: '‰∫∫', pinyin: 'r√©n', meaning: 'persona', strokes: 2 },
                { char: '‰∫ª', pinyin: 'r√©n', meaning: 'persona (radicale)', strokes: 2 },
                { char: 'Âè£', pinyin: 'k«íu', meaning: 'bocca', strokes: 3 },
                { char: 'Êâã', pinyin: 'sh«íu', meaning: 'mano', strokes: 4 },
                { char: 'Êâå', pinyin: 'sh«íu', meaning: 'mano (radicale)', strokes: 3 },
                { char: 'ÂøÉ', pinyin: 'xƒ´n', meaning: 'cuore', strokes: 4 },
                { char: 'ÂøÑ', pinyin: 'xƒ´n', meaning: 'cuore (radicale)', strokes: 3 },
                { char: 'Ê∞¥', pinyin: 'shu«ê', meaning: 'acqua', strokes: 4 },
                { char: 'Ê∞µ', pinyin: 'shu«ê', meaning: 'acqua (radicale)', strokes: 3 },
                { char: 'ÁÅ´', pinyin: 'hu«í', meaning: 'fuoco', strokes: 4 },
                { char: 'ÁÅ¨', pinyin: 'hu«í', meaning: 'fuoco (radicale)', strokes: 4 },
                { char: 'Êú®', pinyin: 'm√π', meaning: 'legno', strokes: 4 },
                { char: 'Èáë', pinyin: 'jƒ´n', meaning: 'metallo', strokes: 8 },
                { char: 'ÈíÖ', pinyin: 'jƒ´n', meaning: 'metallo (radicale)', strokes: 5 },
                { char: 'Âúü', pinyin: 't«î', meaning: 'terra', strokes: 3 },
                { char: 'Êó•', pinyin: 'r√¨', meaning: 'sole', strokes: 4 },
                { char: 'Êúà', pinyin: 'yu√®', meaning: 'luna', strokes: 4 },
                { char: 'Â±±', pinyin: 'shƒÅn', meaning: 'montagna', strokes: 3 },
                { char: 'Áü≥', pinyin: 'sh√≠', meaning: 'pietra', strokes: 5 },
                { char: 'Áî∞', pinyin: 'ti√°n', meaning: 'campo', strokes: 5 }
            ],
            
            numbers: [
                { char: '‰∏Ä', pinyin: 'yƒ´', meaning: 'uno', strokes: 1 },
                { char: '‰∫å', pinyin: '√®r', meaning: 'due', strokes: 2 },
                { char: '‰∏â', pinyin: 'sƒÅn', meaning: 'tre', strokes: 3 },
                { char: 'Âõõ', pinyin: 's√¨', meaning: 'quattro', strokes: 5 },
                { char: '‰∫î', pinyin: 'w«î', meaning: 'cinque', strokes: 4 },
                { char: 'ÂÖ≠', pinyin: 'li√π', meaning: 'sei', strokes: 4 },
                { char: '‰∏É', pinyin: 'qƒ´', meaning: 'sette', strokes: 2 },
                { char: 'ÂÖ´', pinyin: 'bƒÅ', meaning: 'otto', strokes: 2 },
                { char: '‰πù', pinyin: 'ji«î', meaning: 'nove', strokes: 2 },
                { char: 'ÂçÅ', pinyin: 'sh√≠', meaning: 'dieci', strokes: 2 },
                { char: 'Áôæ', pinyin: 'b«éi', meaning: 'cento', strokes: 6 },
                { char: 'ÂçÉ', pinyin: 'qiƒÅn', meaning: 'mille', strokes: 3 },
                { char: '‰∏á', pinyin: 'w√†n', meaning: 'diecimila', strokes: 3 },
                { char: 'Èõ∂', pinyin: 'l√≠ng', meaning: 'zero', strokes: 13 },
                { char: '‰∏™', pinyin: 'g√®', meaning: 'classificatore', strokes: 3 },
                { char: 'Âè™', pinyin: 'zhƒ´', meaning: 'classificatore', strokes: 5 },
                { char: 'Êú¨', pinyin: 'bƒõn', meaning: 'classificatore libri', strokes: 5 },
                { char: 'Âº†', pinyin: 'zhƒÅng', meaning: 'classificatore fogli', strokes: 7 },
                { char: '‰ª∂', pinyin: 'ji√†n', meaning: 'classificatore oggetti', strokes: 6 },
                { char: 'Êù°', pinyin: 'ti√°o', meaning: 'classificatore lunghi', strokes: 7 }
            ],
            
            family: [
                { char: 'Áà∂', pinyin: 'f√π', meaning: 'padre', strokes: 4 },
                { char: 'ÊØç', pinyin: 'm«î', meaning: 'madre', strokes: 5 },
                { char: 'ÂÑø', pinyin: '√©r', meaning: 'figlio', strokes: 2 },
                { char: 'Â•≥', pinyin: 'n«ö', meaning: 'figlia/donna', strokes: 3 },
                { char: 'Â≠ê', pinyin: 'z«ê', meaning: 'figlio', strokes: 3 },
                { char: 'ÂÖÑ', pinyin: 'xi≈çng', meaning: 'fratello maggiore', strokes: 5 },
                { char: 'Âºü', pinyin: 'd√¨', meaning: 'fratello minore', strokes: 7 },
                { char: 'Âßê', pinyin: 'jiƒõ', meaning: 'sorella maggiore', strokes: 8 },
                { char: 'Â¶π', pinyin: 'm√®i', meaning: 'sorella minore', strokes: 8 },
                { char: 'Áà∑', pinyin: 'y√©', meaning: 'nonno paterno', strokes: 10 },
                { char: 'Â•∂', pinyin: 'n«éi', meaning: 'nonna paterna', strokes: 5 },
                { char: 'Â§ñ', pinyin: 'w√†i', meaning: 'esterno', strokes: 5 },
                { char: 'ÂÖ¨', pinyin: 'g≈çng', meaning: 'nonno materno', strokes: 4 },
                { char: 'Â©Ü', pinyin: 'p√≥', meaning: 'nonna materna', strokes: 11 },
                { char: 'Â§´', pinyin: 'f≈´', meaning: 'marito', strokes: 4 },
                { char: 'Â¶ª', pinyin: 'qƒ´', meaning: 'moglie', strokes: 8 },
                { char: '‰∏à', pinyin: 'zh√†ng', meaning: 'marito', strokes: 3 },
                { char: 'ËÄÅ', pinyin: 'l«éo', meaning: 'vecchio', strokes: 6 },
                { char: 'Â∞è', pinyin: 'xi«éo', meaning: 'piccolo', strokes: 3 },
                { char: '‰∫≤', pinyin: 'qƒ´n', meaning: 'parente', strokes: 9 }
            ],
            
            nature: [
                { char: 'Â§©', pinyin: 'tiƒÅn', meaning: 'cielo', strokes: 4 },
                { char: 'Âú∞', pinyin: 'd√¨', meaning: 'terra', strokes: 6 },
                { char: 'Â±±', pinyin: 'shƒÅn', meaning: 'montagna', strokes: 3 },
                { char: 'Ê∞¥', pinyin: 'shu«ê', meaning: 'acqua', strokes: 4 },
                { char: 'ÁÅ´', pinyin: 'hu«í', meaning: 'fuoco', strokes: 4 },
                { char: 'È£é', pinyin: 'fƒìng', meaning: 'vento', strokes: 4 },
                { char: 'Èõ®', pinyin: 'y«î', meaning: 'pioggia', strokes: 8 },
                { char: 'Èõ™', pinyin: 'xuƒõ', meaning: 'neve', strokes: 11 },
                { char: '‰∫ë', pinyin: 'y√∫n', meaning: 'nuvola', strokes: 4 },
                { char: 'Èõ∑', pinyin: 'l√©i', meaning: 'tuono', strokes: 13 },
                { char: 'Áîµ', pinyin: 'di√†n', meaning: 'elettricit√†', strokes: 5 },
                { char: 'ÂÖâ', pinyin: 'guƒÅng', meaning: 'luce', strokes: 6 },
                { char: 'Èò≥', pinyin: 'y√°ng', meaning: 'sole', strokes: 6 },
                { char: 'Èò¥', pinyin: 'yƒ´n', meaning: 'ombra', strokes: 6 },
                { char: 'Ê†ë', pinyin: 'sh√π', meaning: 'albero', strokes: 9 },
                { char: 'Ëä±', pinyin: 'huƒÅ', meaning: 'fiore', strokes: 7 },
                { char: 'Ëçâ', pinyin: 'c«éo', meaning: 'erba', strokes: 9 },
                { char: 'Âè∂', pinyin: 'y√®', meaning: 'foglia', strokes: 5 },
                { char: 'Êûú', pinyin: 'gu«í', meaning: 'frutto', strokes: 8 },
                { char: 'Áßç', pinyin: 'zh«íng', meaning: 'seme/tipo', strokes: 9 }
            ],
            
            body: [
                { char: 'Â§¥', pinyin: 't√≥u', meaning: 'testa', strokes: 5 },
                { char: 'ËÑ∏', pinyin: 'li«én', meaning: 'viso', strokes: 11 },
                { char: 'Áúº', pinyin: 'y«én', meaning: 'occhio', strokes: 11 },
                { char: 'Èºª', pinyin: 'b√≠', meaning: 'naso', strokes: 14 },
                { char: 'Âò¥', pinyin: 'zu«ê', meaning: 'bocca', strokes: 16 },
                { char: 'ËÄ≥', pinyin: 'ƒõr', meaning: 'orecchio', strokes: 6 },
                { char: 'Êâã', pinyin: 'sh«íu', meaning: 'mano', strokes: 4 },
                { char: 'ËÑö', pinyin: 'ji«éo', meaning: 'piede', strokes: 11 },
                { char: 'ËÖø', pinyin: 'tu«ê', meaning: 'gamba', strokes: 13 },
                { char: 'Ë∫´', pinyin: 'shƒìn', meaning: 'corpo', strokes: 7 },
                { char: 'ÂøÉ', pinyin: 'xƒ´n', meaning: 'cuore', strokes: 4 },
                { char: 'ËÇö', pinyin: 'd√π', meaning: 'pancia', strokes: 7 },
                { char: 'ËÉå', pinyin: 'b√®i', meaning: 'schiena', strokes: 9 },
                { char: 'ËÇ©', pinyin: 'jiƒÅn', meaning: 'spalla', strokes: 8 },
                { char: 'ËÉ≥', pinyin: 'gƒì', meaning: 'braccio', strokes: 10 },
                { char: 'ËÜä', pinyin: 'b√≥', meaning: 'braccio', strokes: 14 },
                { char: 'Êâã', pinyin: 'sh«íu', meaning: 'mano', strokes: 4 },
                { char: 'Êåá', pinyin: 'zh«ê', meaning: 'dito', strokes: 9 },
                { char: 'Â§¥', pinyin: 't√≥u', meaning: 'capelli', strokes: 10 },
                { char: 'Áâô', pinyin: 'y√°', meaning: 'dente', strokes: 4 }
            ],
            
            time: [
                { char: 'Âπ¥', pinyin: 'ni√°n', meaning: 'anno', strokes: 6 },
                { char: 'Êúà', pinyin: 'yu√®', meaning: 'mese', strokes: 4 },
                { char: 'Êó•', pinyin: 'r√¨', meaning: 'giorno', strokes: 4 },
                { char: 'Êó∂', pinyin: 'sh√≠', meaning: 'ora', strokes: 7 },
                { char: 'ÂàÜ', pinyin: 'fƒìn', meaning: 'minuto', strokes: 4 },
                { char: 'Áßí', pinyin: 'mi«éo', meaning: 'secondo', strokes: 9 },
                { char: '‰ªä', pinyin: 'jƒ´n', meaning: 'oggi', strokes: 4 },
                { char: 'Êòé', pinyin: 'm√≠ng', meaning: 'domani', strokes: 8 },
                { char: 'Êò®', pinyin: 'zu√≥', meaning: 'ieri', strokes: 9 },
                { char: 'Êó©', pinyin: 'z«éo', meaning: 'presto', strokes: 6 },
                { char: 'Êôö', pinyin: 'w«én', meaning: 'tardi', strokes: 11 },
                { char: '‰∏ä', pinyin: 'sh√†ng', meaning: 'sopra/mattina', strokes: 3 },
                { char: '‰∏ã', pinyin: 'xi√†', meaning: 'sotto/pomeriggio', strokes: 3 },
                { char: 'Âçà', pinyin: 'w«î', meaning: 'mezzogiorno', strokes: 4 },
                { char: 'Â§ú', pinyin: 'y√®', meaning: 'notte', strokes: 8 },
                { char: 'Êò•', pinyin: 'ch≈´n', meaning: 'primavera', strokes: 9 },
                { char: 'Â§è', pinyin: 'xi√†', meaning: 'estate', strokes: 10 },
                { char: 'Áßã', pinyin: 'qi≈´', meaning: 'autunno', strokes: 9 },
                { char: 'ÂÜ¨', pinyin: 'd≈çng', meaning: 'inverno', strokes: 5 },
                { char: 'Âë®', pinyin: 'zh≈çu', meaning: 'settimana', strokes: 8 }
            ],
            
            food: [
                { char: 'È•≠', pinyin: 'f√†n', meaning: 'riso/cibo', strokes: 7 },
                { char: 'Èù¢', pinyin: 'mi√†n', meaning: 'noodles', strokes: 9 },
                { char: 'ÂåÖ', pinyin: 'bƒÅo', meaning: 'panino', strokes: 5 },
                { char: 'ËÇâ', pinyin: 'r√≤u', meaning: 'carne', strokes: 6 },
                { char: 'È±º', pinyin: 'y√∫', meaning: 'pesce', strokes: 8 },
                { char: 'È∏°', pinyin: 'jƒ´', meaning: 'pollo', strokes: 7 },
                { char: 'Ëõã', pinyin: 'd√†n', meaning: 'uovo', strokes: 11 },
                { char: 'Ëèú', pinyin: 'c√†i', meaning: 'verdura', strokes: 11 },
                { char: 'Êûú', pinyin: 'gu«í', meaning: 'frutta', strokes: 8 },
                { char: 'Ëãπ', pinyin: 'p√≠ng', meaning: 'mela', strokes: 8 },
                { char: 'È¶ô', pinyin: 'xiƒÅng', meaning: 'banana', strokes: 9 },
                { char: 'Ëïâ', pinyin: 'jiƒÅo', meaning: 'banana', strokes: 15 },
                { char: 'Ëå∂', pinyin: 'ch√°', meaning: 't√®', strokes: 9 },
                { char: 'Âíñ', pinyin: 'kƒÅ', meaning: 'caff√®', strokes: 8 },
                { char: 'Âï°', pinyin: 'fƒìi', meaning: 'caff√®', strokes: 11 },
                { char: 'Ê∞¥', pinyin: 'shu«ê', meaning: 'acqua', strokes: 4 },
                { char: 'ÈÖí', pinyin: 'ji«î', meaning: 'alcol', strokes: 10 },
                { char: 'Â•∂', pinyin: 'n«éi', meaning: 'latte', strokes: 5 },
                { char: 'Á≥ñ', pinyin: 't√°ng', meaning: 'zucchero', strokes: 16 },
                { char: 'Áõê', pinyin: 'y√°n', meaning: 'sale', strokes: 10 }
            ],
            
            colors: [
                { char: 'Á∫¢', pinyin: 'h√≥ng', meaning: 'rosso', strokes: 6 },
                { char: 'ÈªÑ', pinyin: 'hu√°ng', meaning: 'giallo', strokes: 11 },
                { char: 'Ëìù', pinyin: 'l√°n', meaning: 'blu', strokes: 13 },
                { char: 'Áªø', pinyin: 'l«ú', meaning: 'verde', strokes: 11 },
                { char: 'ÁôΩ', pinyin: 'b√°i', meaning: 'bianco', strokes: 5 },
                { char: 'Èªë', pinyin: 'hƒìi', meaning: 'nero', strokes: 12 },
                { char: 'ÁÅ∞', pinyin: 'huƒ´', meaning: 'grigio', strokes: 6 },
                { char: 'Á¥´', pinyin: 'z«ê', meaning: 'viola', strokes: 12 },
                { char: 'Á≤â', pinyin: 'fƒõn', meaning: 'rosa', strokes: 10 },
                { char: 'Ê©ô', pinyin: 'ch√©ng', meaning: 'arancione', strokes: 16 },
                { char: 'Ê£ï', pinyin: 'z≈çng', meaning: 'marrone', strokes: 12 },
                { char: 'Èáë', pinyin: 'jƒ´n', meaning: 'oro', strokes: 8 },
                { char: 'Èì∂', pinyin: 'y√≠n', meaning: 'argento', strokes: 11 },
                { char: 'Ëâ≤', pinyin: 's√®', meaning: 'colore', strokes: 6 },
                { char: '‰∫Æ', pinyin: 'li√†ng', meaning: 'luminoso', strokes: 9 },
                { char: 'Êöó', pinyin: '√†n', meaning: 'scuro', strokes: 13 },
                { char: 'Ê∑±', pinyin: 'shƒìn', meaning: 'profondo', strokes: 11 },
                { char: 'ÊµÖ', pinyin: 'qi«én', meaning: 'chiaro', strokes: 8 },
                { char: 'Ê∑°', pinyin: 'd√†n', meaning: 'pallido', strokes: 11 },
                { char: 'Êµì', pinyin: 'n√≥ng', meaning: 'intenso', strokes: 9 }
            ],
            
            actions: [
                { char: 'Ëµ∞', pinyin: 'z«íu', meaning: 'camminare', strokes: 7 },
                { char: 'Ë∑ë', pinyin: 'p«éo', meaning: 'correre', strokes: 12 },
                { char: 'Ë∑≥', pinyin: 'ti√†o', meaning: 'saltare', strokes: 13 },
                { char: 'Âùê', pinyin: 'zu√≤', meaning: 'sedere', strokes: 7 },
                { char: 'Á´ô', pinyin: 'zh√†n', meaning: 'stare in piedi', strokes: 10 },
                { char: 'Ë∫∫', pinyin: 't«éng', meaning: 'sdraiarsi', strokes: 15 },
                { char: 'Áù°', pinyin: 'shu√¨', meaning: 'dormire', strokes: 13 },
                { char: 'Ëµ∑', pinyin: 'q«ê', meaning: 'alzarsi', strokes: 10 },
                { char: 'Ê¥ó', pinyin: 'x«ê', meaning: 'lavare', strokes: 9 },
                { char: 'Âà∑', pinyin: 'shuƒÅ', meaning: 'spazzolare', strokes: 8 },
                { char: 'Á©ø', pinyin: 'chuƒÅn', meaning: 'indossare', strokes: 9 },
                { char: 'ËÑ±', pinyin: 'tu≈ç', meaning: 'togliere', strokes: 11 },
                { char: 'ÂºÄ', pinyin: 'kƒÅi', meaning: 'aprire', strokes: 4 },
                { char: 'ÂÖ≥', pinyin: 'guƒÅn', meaning: 'chiudere', strokes: 6 },
                { char: 'Êãø', pinyin: 'n√°', meaning: 'prendere', strokes: 10 },
                { char: 'Êîæ', pinyin: 'f√†ng', meaning: 'mettere', strokes: 8 },
                { char: 'Êâæ', pinyin: 'zh«éo', meaning: 'cercare', strokes: 7 },
                { char: 'Á≠â', pinyin: 'dƒõng', meaning: 'aspettare', strokes: 12 },
                { char: 'Â∏Æ', pinyin: 'bƒÅng', meaning: 'aiutare', strokes: 9 },
                { char: 'Êïô', pinyin: 'jiƒÅo', meaning: 'insegnare', strokes: 11 }
            ]
        };

        // Setup Canvas (stesso codice delle altre app)
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let strokeWidth = 5;
        let drawingEnabled = false;
        let lastX = 0;
        let lastY = 0;

        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        ctx.strokeStyle = '#2c3e50';
        ctx.globalCompositeOperation = 'source-over';

        let eventsAttached = false;

        function attachDrawingEvents() {
            if (eventsAttached) return;
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawingAction);
            canvas.addEventListener('mouseleave', stopDrawingAction);
            canvas.addEventListener('touchstart', handleTouchStart, { passive: false });
            canvas.addEventListener('touchmove', handleTouchMove, { passive: false });
            canvas.addEventListener('touchend', stopDrawingAction, { passive: false });
            canvas.addEventListener('touchcancel', stopDrawingAction, { passive: false });
            
            eventsAttached = true;
            canvas.style.cursor = 'crosshair';
        }

        function removeDrawingEvents() {
            canvas.removeEventListener('mousedown', startDrawing);
            canvas.removeEventListener('mousemove', draw);
            canvas.removeEventListener('mouseup', stopDrawingAction);
            canvas.removeEventListener('mouseleave', stopDrawingAction);
            canvas.removeEventListener('touchstart', handleTouchStart);
            canvas.removeEventListener('touchmove', handleTouchMove);
            canvas.removeEventListener('touchend', stopDrawingAction);
            canvas.removeEventListener('touchcancel', stopDrawingAction);
            
            eventsAttached = false;
            canvas.style.cursor = 'default';
        }

        function getCanvasCoordinates(e) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            
            return {
                x: (e.clientX - rect.left) * scaleX,
                y: (e.clientY - rect.top) * scaleY
            };
        }

        function startDrawing(e) {
            if (!drawingEnabled) return;
            
            isDrawing = true;
            const coords = getCanvasCoordinates(e);
            lastX = coords.x;
            lastY = coords.y;
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
        }

        function draw(e) {
            if (!isDrawing || !drawingEnabled) return;
            
            const coords = getCanvasCoordinates(e);
            
            ctx.lineWidth = strokeWidth;
            ctx.strokeStyle = '#2c3e50';
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(coords.x, coords.y);
            ctx.stroke();
            
            lastX = coords.x;
            lastY = coords.y;
        }

        function stopDrawingAction() {
            if (isDrawing) {
                isDrawing = false;
                ctx.beginPath();
            }
        }

        function handleTouchStart(e) {
            e.preventDefault();
            if (!drawingEnabled || e.touches.length !== 1) return;
            
            const touch = e.touches[0];
            const coords = getCanvasCoordinates(touch);
            
            isDrawing = true;
            lastX = coords.x;
            lastY = coords.y;
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
        }

        function handleTouchMove(e) {
            e.preventDefault();
            if (!isDrawing || !drawingEnabled || e.touches.length !== 1) return;
            
            const touch = e.touches[0];
            const coords = getCanvasCoordinates(touch);
            
            ctx.lineWidth = strokeWidth;
            ctx.strokeStyle = '#2c3e50';
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(coords.x, coords.y);
            ctx.stroke();
            
            lastX = coords.x;
            lastY = coords.y;
        }

        function toggleDrawing() {
            drawingEnabled = !drawingEnabled;
            const drawBtn = document.getElementById('drawBtn');
            const stopBtn = document.getElementById('stopBtn');
            
            if (drawingEnabled) {
                attachDrawingEvents();
                drawBtn.style.display = 'none';
                stopBtn.style.display = 'inline-block';
                drawBtn.classList.add('active');
            } else {
                removeDrawingEvents();
                drawBtn.style.display = 'inline-block';
                stopBtn.style.display = 'none';
                drawBtn.classList.remove('active');
            }
        }

        function stopDrawing() {
            drawingEnabled = false;
            isDrawing = false;
            removeDrawingEvents();
            
            const drawBtn = document.getElementById('drawBtn');
            const stopBtn = document.getElementById('stopBtn');
            
            drawBtn.style.display = 'inline-block';
            stopBtn.style.display = 'none';
            drawBtn.classList.remove('active');
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function changeStrokeWidth(width) {
            strokeWidth = width;
            document.querySelectorAll('.control-btn').forEach(btn => {
                btn.style.background = '#6c757d';
            });
            event.target.style.background = '#28a745';
        }

        // Funzioni per gestire le categorie
        function showCategory(categoryName) {
            // Rimuovi active da tutti i bottoni categoria
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Aggiungi active al bottone cliccato
            event.target.classList.add('active');
            
            // Mostra i caratteri della categoria
            const characterGrid = document.getElementById('characterGrid');
            const characters = chineseCharacters[categoryName];
            
            characterGrid.innerHTML = '';
            
            characters.forEach(char => {
                const btn = document.createElement('button');
                btn.className = 'character-btn';
                btn.innerHTML = `${char.char}<div class="pinyin">${char.pinyin}</div>`;
                btn.onclick = () => selectCharacter(char, btn);
                characterGrid.appendChild(btn);
            });
        }

        function selectCharacter(character, btnElement) {
            // Rimuovi active da tutti i caratteri
            document.querySelectorAll('.character-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Aggiungi active al carattere selezionato
            btnElement.classList.add('active');
            
            // Aggiorna il display
            document.getElementById('currentDisplay').textContent = character.char;
            document.getElementById('currentPinyin').textContent = character.pinyin;
            document.getElementById('currentMeaning').textContent = character.meaning;
            document.getElementById('currentStrokes').textContent = character.strokes;
            
            // Mostra i dettagli
            document.getElementById('characterDetails').style.display = 'block';
            
            clearCanvas();
        }

        // Inizializza l'app
        function initApp() {
            changeStrokeWidth(5);
            
            // Mostra HSK1 di default
            showCategory('hsk1');
            document.querySelector('.category-btn').classList.add('active');
        }

        initApp();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98e71b63673d4bee',t:'MTc2MDQ0NTIyNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
<button class="inline-flex items-center justify-center rounded-md px-4 py-2 text-base text-white font-semibold shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 bg-gradient-to-r from-red-500 to-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 active:transform active:scale-95"><a href="https://scottino2019-glitch.github.io/lingua-cinese/caratteri.html"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
</svg> Indietro </a></button>
</html>
