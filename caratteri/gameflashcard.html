<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcard Cinese - Impara gli Ideogrammi</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .progress-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            color: white;
        }
        
        .progress-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            height: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #4ade80, #22c55e);
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .game-area {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .flashcard-container {
            perspective: 1000px;
            margin: 30px auto;
            width: 300px;
            height: 200px;
        }
        
        .flashcard {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            font-weight: 500;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .card-front {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            font-family: 'Noto Sans SC', sans-serif;
        }
        
        .card-back {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            transform: rotateY(180deg);
            font-size: 2rem;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .option-btn {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 15px 20px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #334155;
        }
        
        .option-btn:hover {
            border-color: #667eea;
            background: #f1f5f9;
            transform: translateY(-2px);
        }
        
        .option-btn.correct {
            background: #dcfce7;
            border-color: #22c55e;
            color: #166534;
        }
        
        .option-btn.incorrect {
            background: #fef2f2;
            border-color: #ef4444;
            color: #991b1b;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .feedback {
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .feedback.show {
            opacity: 1;
        }
        
        .feedback.correct {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #22c55e;
        }
        
        .feedback.incorrect {
            background: #fef2f2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        
        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mode-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mode-btn.active {
            background: white;
            color: #667eea;
        }
        
        .writing-container {
            max-width: 400px;
            margin: 30px auto;
            text-align: center;
        }
        
        .writing-prompt {
            font-size: 1.2rem;
            font-weight: 600;
            color: #334155;
            margin-bottom: 20px;
        }
        
        .writing-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 2rem;
            font-family: 'Noto Sans SC', sans-serif;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
            transition: border-color 0.3s ease;
        }
        
        .writing-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .writing-input.correct {
            border-color: #22c55e;
            background: #dcfce7;
        }
        
        .writing-input.incorrect {
            border-color: #ef4444;
            background: #fef2f2;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .game-area {
                padding: 20px;
            }
            
            .flashcard-container {
                width: 250px;
                height: 160px;
            }
            
            .card-face {
                font-size: 3rem;
            }
            
            .card-back {
                font-size: 1.5rem;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .mode-selector {
                flex-wrap: wrap;
            }
            
            .mode-btn {
                font-size: 0.9rem;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üá®üá≥ Flashcard Cinese</h1>
            <p>Impara 150 ideogrammi con il loro pinyin</p>
        </div>
        
        <div class="progress-section">
            <div class="progress-stats">
                <div class="stat-item">
                    <span class="stat-number" id="currentCard">1</span>
                    <span class="stat-label">Carta Attuale</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalCards">150</span>
                    <span class="stat-label">Totale</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="correctAnswers">0</span>
                    <span class="stat-label">Corrette</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="accuracy">0%</span>
                    <span class="stat-label">Precisione</span>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0.67%"></div>
            </div>
            
            <div class="mode-selector">
                <button class="mode-btn active" onclick="setMode('hanzi-to-pinyin')">Ideogramma ‚Üí Pinyin</button>
                <button class="mode-btn" onclick="setMode('pinyin-to-hanzi')">Pinyin ‚Üí Ideogramma</button>
                <button class="mode-btn" onclick="setMode('writing-hanzi')">Scrivi Ideogramma</button>
                <button class="mode-btn" onclick="setMode('writing-pinyin')">Scrivi Pinyin</button>
            </div>
        </div>
        
        <div class="game-area">
            <div class="flashcard-container">
                <div class="flashcard" id="flashcard" onclick="flipCard()">
                    <div class="card-face card-front" id="cardFront">
                        ‰∫∫
                    </div>
                    <div class="card-face card-back" id="cardBack">
                        r√©n
                    </div>
                </div>
            </div>
            
            <div class="options-container" id="optionsContainer">
                <button class="option-btn" onclick="selectAnswer(0)">r√©n</button>
                <button class="option-btn" onclick="selectAnswer(1)">n«ê</button>
                <button class="option-btn" onclick="selectAnswer(2)">h«éo</button>
                <button class="option-btn" onclick="selectAnswer(3)">w«í</button>
            </div>
            
            <div class="writing-container" id="writingContainer" style="display: none;">
                <div class="writing-prompt" id="writingPrompt">Scrivi l'ideogramma per "persona":</div>
                <input type="text" class="writing-input" id="writingInput" placeholder="Scrivi qui...">
                <button class="btn" onclick="checkWritingAnswer()" id="checkBtn">Controlla</button>
            </div>
            
            <div class="feedback" id="feedback"></div>
            
            <div class="controls">
                <button class="btn" onclick="flipCard()">Gira Carta</button>
                <button class="btn" onclick="nextCard()" id="nextBtn" disabled>Prossima</button>
                <button class="btn" onclick="resetGame()">Ricomincia</button>
            </div>
        </div>
    </div>

    <script>
        // Database di 150 ideogrammi cinesi con pinyin
        const flashcards = [
            {hanzi: '‰∫∫', pinyin: 'r√©n', meaning: 'persona'},
            {hanzi: '‰Ω†', pinyin: 'n«ê', meaning: 'tu'},
            {hanzi: 'Â•Ω', pinyin: 'h«éo', meaning: 'bene/buono'},
            {hanzi: 'Êàë', pinyin: 'w«í', meaning: 'io'},
            {hanzi: 'ÊòØ', pinyin: 'sh√¨', meaning: 'essere'},
            {hanzi: 'ÁöÑ', pinyin: 'de', meaning: 'particella possessiva'},
            {hanzi: '‰∏ç', pinyin: 'b√π', meaning: 'non'},
            {hanzi: 'Âú®', pinyin: 'z√†i', meaning: 'essere in/a'},
            {hanzi: 'Êúâ', pinyin: 'y«íu', meaning: 'avere'},
            {hanzi: '‰ªñ', pinyin: 'tƒÅ', meaning: 'lui'},
            {hanzi: 'Ëøô', pinyin: 'zh√®', meaning: 'questo'},
            {hanzi: '‰∏≠', pinyin: 'zh≈çng', meaning: 'centro/mezzo'},
            {hanzi: 'Êù•', pinyin: 'l√°i', meaning: 'venire'},
            {hanzi: '‰∫Ü', pinyin: 'le', meaning: 'particella aspettuale'},
            {hanzi: 'Êó∂', pinyin: 'sh√≠', meaning: 'tempo'},
            {hanzi: '‰ºö', pinyin: 'hu√¨', meaning: 'sapere/incontrare'},
            {hanzi: 'ÂèØ', pinyin: 'kƒõ', meaning: 'potere'},
            {hanzi: '‰ªÄ', pinyin: 'sh√©n', meaning: 'cosa'},
            {hanzi: '‰πà', pinyin: 'me', meaning: 'particella interrogativa'},
            {hanzi: 'ËØ¥', pinyin: 'shu≈ç', meaning: 'dire'},
            {hanzi: 'Â•π', pinyin: 'tƒÅ', meaning: 'lei'},
            {hanzi: 'Âéª', pinyin: 'q√π', meaning: 'andare'},
            {hanzi: 'Âá∫', pinyin: 'ch≈´', meaning: 'uscire'},
            {hanzi: 'Â∞±', pinyin: 'ji√π', meaning: 'allora/proprio'},
            {hanzi: 'ÈÉΩ', pinyin: 'd≈çu', meaning: 'tutto'},
            {hanzi: 'Êää', pinyin: 'b«é', meaning: 'prendere'},
            {hanzi: 'Âíå', pinyin: 'h√©', meaning: 'e/con'},
            {hanzi: 'ÂØπ', pinyin: 'du√¨', meaning: 'giusto/verso'},
            {hanzi: 'Ê≤°', pinyin: 'm√©i', meaning: 'non avere'},
            {hanzi: 'Ëµ∑', pinyin: 'q«ê', meaning: 'alzare'},
            {hanzi: 'Ëøò', pinyin: 'h√°i', meaning: 'ancora'},
            {hanzi: '‰πü', pinyin: 'yƒõ', meaning: 'anche'},
            {hanzi: 'Áúã', pinyin: 'k√†n', meaning: 'guardare'},
            {hanzi: 'ÊÉ≥', pinyin: 'xi«éng', meaning: 'pensare'},
            {hanzi: 'ÈÇ£', pinyin: 'n√†', meaning: 'quello'},
            {hanzi: 'Áßç', pinyin: 'zh«íng', meaning: 'tipo'},
            {hanzi: '‰∏ä', pinyin: 'sh√†ng', meaning: 'sopra'},
            {hanzi: '‰∏ã', pinyin: 'xi√†', meaning: 'sotto'},
            {hanzi: 'Ëá™', pinyin: 'z√¨', meaning: 'se stesso'},
            {hanzi: 'Â∑±', pinyin: 'j«ê', meaning: 'se stesso'},
            {hanzi: 'Ëøá', pinyin: 'gu√≤', meaning: 'passare'},
            {hanzi: 'ÂÆ∂', pinyin: 'jiƒÅ', meaning: 'casa'},
            {hanzi: 'Â≠¶', pinyin: 'xu√©', meaning: 'studiare'},
            {hanzi: 'Áîü', pinyin: 'shƒìng', meaning: 'nascere/vita'},
            {hanzi: 'Âêå', pinyin: 't√≥ng', meaning: 'stesso'},
            {hanzi: 'ËÄÅ', pinyin: 'l«éo', meaning: 'vecchio'},
            {hanzi: 'Â∏à', pinyin: 'shƒ´', meaning: 'maestro'},
            {hanzi: 'ÂºÄ', pinyin: 'kƒÅi', meaning: 'aprire'},
            {hanzi: '‰∏â', pinyin: 'sƒÅn', meaning: 'tre'},
            {hanzi: 'Áé∞', pinyin: 'xi√†n', meaning: 'ora/apparire'},
            {hanzi: 'ÈóÆ', pinyin: 'w√®n', meaning: 'chiedere'},
            {hanzi: 'Èïø', pinyin: 'ch√°ng', meaning: 'lungo'},
            {hanzi: 'Â∑•', pinyin: 'g≈çng', meaning: 'lavoro'},
            {hanzi: '‰Ωú', pinyin: 'zu√≤', meaning: 'fare'},
            {hanzi: 'Âú∞', pinyin: 'd√¨', meaning: 'terra'},
            {hanzi: 'Êñπ', pinyin: 'fƒÅng', meaning: 'direzione'},
            {hanzi: 'Âπ¥', pinyin: 'ni√°n', meaning: 'anno'},
            {hanzi: 'ÂÖ®', pinyin: 'qu√°n', meaning: 'tutto'},
            {hanzi: 'Êâã', pinyin: 'sh«íu', meaning: 'mano'},
            {hanzi: 'Â∫î', pinyin: 'yƒ´ng', meaning: 'dovere'},
            {hanzi: 'ËØ•', pinyin: 'gƒÅi', meaning: 'dovere'},
            {hanzi: 'Âõ†', pinyin: 'yƒ´n', meaning: 'causa'},
            {hanzi: '‰∏∫', pinyin: 'w√©i', meaning: 'per/fare'},
            {hanzi: 'ÊâÄ', pinyin: 'su«í', meaning: 'luogo'},
            {hanzi: '‰ª•', pinyin: 'y«ê', meaning: 'con/usare'},
            {hanzi: 'ÁÑ∂', pinyin: 'r√°n', meaning: 'cos√¨'},
            {hanzi: 'Âêé', pinyin: 'h√≤u', meaning: 'dopo'},
            {hanzi: 'Ââç', pinyin: 'qi√°n', meaning: 'prima'},
            {hanzi: 'Èù¢', pinyin: 'mi√†n', meaning: 'faccia'},
            {hanzi: 'ÂÖ¨', pinyin: 'g≈çng', meaning: 'pubblico'},
            {hanzi: 'Âè∏', pinyin: 'sƒ´', meaning: 'dipartimento'},
            {hanzi: 'Âèà', pinyin: 'y√≤u', meaning: 'di nuovo'},
            {hanzi: '‰ªé', pinyin: 'c√≥ng', meaning: 'da'},
            {hanzi: '‰∫ã', pinyin: 'sh√¨', meaning: 'cosa/affare'},
            {hanzi: '‰∏§', pinyin: 'li«éng', meaning: 'due'},
            {hanzi: 'Ê¨°', pinyin: 'c√¨', meaning: 'volta'},
            {hanzi: '‰Ωø', pinyin: 'sh«ê', meaning: 'usare'},
            {hanzi: 'Ë∫´', pinyin: 'shƒìn', meaning: 'corpo'},
            {hanzi: 'ËÄÖ', pinyin: 'zhƒõ', meaning: 'persona che'},
            {hanzi: 'È´ò', pinyin: 'gƒÅo', meaning: 'alto'},
            {hanzi: '‰ª£', pinyin: 'd√†i', meaning: 'generazione'},
            {hanzi: 'Â∞è', pinyin: 'xi«éo', meaning: 'piccolo'},
            {hanzi: 'Â§ß', pinyin: 'd√†', meaning: 'grande'},
            {hanzi: 'Ê∞¥', pinyin: 'shu«ê', meaning: 'acqua'},
            {hanzi: 'ÁÅ´', pinyin: 'hu«í', meaning: 'fuoco'},
            {hanzi: 'Âúü', pinyin: 't«î', meaning: 'terra'},
            {hanzi: 'Êú®', pinyin: 'm√π', meaning: 'legno'},
            {hanzi: 'Èáë', pinyin: 'jƒ´n', meaning: 'oro/metallo'},
            {hanzi: 'Êó•', pinyin: 'r√¨', meaning: 'sole/giorno'},
            {hanzi: 'Êúà', pinyin: 'yu√®', meaning: 'luna/mese'},
            {hanzi: 'Â±±', pinyin: 'shƒÅn', meaning: 'montagna'},
            {hanzi: 'Â∑ù', pinyin: 'chuƒÅn', meaning: 'fiume'},
            {hanzi: 'Áî∞', pinyin: 'ti√°n', meaning: 'campo'},
            {hanzi: 'ÁõÆ', pinyin: 'm√π', meaning: 'occhio'},
            {hanzi: 'Âè£', pinyin: 'k«íu', meaning: 'bocca'},
            {hanzi: 'ËÄ≥', pinyin: 'ƒõr', meaning: 'orecchio'},
            {hanzi: 'ÂøÉ', pinyin: 'xƒ´n', meaning: 'cuore'},
            {hanzi: 'Èó®', pinyin: 'm√©n', meaning: 'porta'},
            {hanzi: 'ËΩ¶', pinyin: 'chƒì', meaning: 'macchina'},
            {hanzi: 'È©¨', pinyin: 'm«é', meaning: 'cavallo'},
            {hanzi: 'È±º', pinyin: 'y√∫', meaning: 'pesce'},
            {hanzi: 'È∏ü', pinyin: 'ni«éo', meaning: 'uccello'},
            {hanzi: 'Ëä±', pinyin: 'huƒÅ', meaning: 'fiore'},
            {hanzi: 'Ëçâ', pinyin: 'c«éo', meaning: 'erba'},
            {hanzi: 'Ê†ë', pinyin: 'sh√π', meaning: 'albero'},
            {hanzi: '‰π¶', pinyin: 'sh≈´', meaning: 'libro'},
            {hanzi: 'Áîµ', pinyin: 'di√†n', meaning: 'elettricit√†'},
            {hanzi: 'ËØù', pinyin: 'hu√†', meaning: 'parola'},
            {hanzi: 'ÂõΩ', pinyin: 'gu√≥', meaning: 'paese'},
            {hanzi: 'Âüé', pinyin: 'ch√©ng', meaning: 'citt√†'},
            {hanzi: 'Â∏Ç', pinyin: 'sh√¨', meaning: 'mercato/citt√†'},
            {hanzi: 'Â∫ó', pinyin: 'di√†n', meaning: 'negozio'},
            {hanzi: 'È•≠', pinyin: 'f√†n', meaning: 'riso/cibo'},
            {hanzi: 'Ëèú', pinyin: 'c√†i', meaning: 'verdura'},
            {hanzi: 'ËÇâ', pinyin: 'r√≤u', meaning: 'carne'},
            {hanzi: 'Ëå∂', pinyin: 'ch√°', meaning: 't√®'},
            {hanzi: 'ÈÖí', pinyin: 'ji«î', meaning: 'alcol'},
            {hanzi: 'Èí±', pinyin: 'qi√°n', meaning: 'soldi'},
            {hanzi: '‰π∞', pinyin: 'm«éi', meaning: 'comprare'},
            {hanzi: 'Âçñ', pinyin: 'm√†i', meaning: 'vendere'},
            {hanzi: 'Ëµ∞', pinyin: 'z«íu', meaning: 'camminare'},
            {hanzi: 'Ë∑ë', pinyin: 'p«éo', meaning: 'correre'},
            {hanzi: 'Âùê', pinyin: 'zu√≤', meaning: 'sedere'},
            {hanzi: 'Á´ô', pinyin: 'zh√†n', meaning: 'stare in piedi'},
            {hanzi: 'Áù°', pinyin: 'shu√¨', meaning: 'dormire'},
            {hanzi: 'ÂêÉ', pinyin: 'chƒ´', meaning: 'mangiare'},
            {hanzi: 'Âñù', pinyin: 'hƒì', meaning: 'bere'},
            {hanzi: 'Á©ø', pinyin: 'chuƒÅn', meaning: 'indossare'},
            {hanzi: '‰Ωè', pinyin: 'zh√π', meaning: 'abitare'},
            {hanzi: 'Áé©', pinyin: 'w√°n', meaning: 'giocare'},
            {hanzi: 'Á¨ë', pinyin: 'xi√†o', meaning: 'ridere'},
            {hanzi: 'Âì≠', pinyin: 'k≈´', meaning: 'piangere'},
            {hanzi: 'Âî±', pinyin: 'ch√†ng', meaning: 'cantare'},
            {hanzi: 'Ë∑≥', pinyin: 'ti√†o', meaning: 'saltare'},
            {hanzi: 'ËØª', pinyin: 'd√∫', meaning: 'leggere'},
            {hanzi: 'ÂÜô', pinyin: 'xiƒõ', meaning: 'scrivere'},
            {hanzi: 'Âê¨', pinyin: 'tƒ´ng', meaning: 'ascoltare'},
            {hanzi: 'Áà±', pinyin: '√†i', meaning: 'amare'},
            {hanzi: 'Âñú', pinyin: 'x«ê', meaning: 'piacere'},
            {hanzi: 'Ê¨¢', pinyin: 'huƒÅn', meaning: 'gioia'},
            {hanzi: 'Âø´', pinyin: 'ku√†i', meaning: 'veloce'},
            {hanzi: 'ÊÖ¢', pinyin: 'm√†n', meaning: 'lento'},
            {hanzi: 'Êñ∞', pinyin: 'xƒ´n', meaning: 'nuovo'},
            {hanzi: 'Êóß', pinyin: 'ji√π', meaning: 'vecchio'},
            {hanzi: 'Â§ö', pinyin: 'du≈ç', meaning: 'molto'},
            {hanzi: 'Â∞ë', pinyin: 'sh«éo', meaning: 'poco'},
            {hanzi: 'Ëøú', pinyin: 'yu«én', meaning: 'lontano'},
            {hanzi: 'Ëøë', pinyin: 'j√¨n', meaning: 'vicino'},
            {hanzi: 'Â∑¶', pinyin: 'zu«í', meaning: 'sinistra'},
            {hanzi: 'Âè≥', pinyin: 'y√≤u', meaning: 'destra'},
            {hanzi: '‰∏ú', pinyin: 'd≈çng', meaning: 'est'},
            {hanzi: 'Ë•ø', pinyin: 'xƒ´', meaning: 'ovest'},
            {hanzi: 'Âçó', pinyin: 'n√°n', meaning: 'sud'},
            {hanzi: 'Âåó', pinyin: 'bƒõi', meaning: 'nord'},
            {hanzi: '‰ªä', pinyin: 'jƒ´n', meaning: 'oggi'},
            {hanzi: 'Â§©', pinyin: 'tiƒÅn', meaning: 'cielo/giorno'},
            {hanzi: 'Êò®', pinyin: 'zu√≥', meaning: 'ieri'},
            {hanzi: 'Êòé', pinyin: 'm√≠ng', meaning: 'domani/luminoso'},
            {hanzi: 'Êó©', pinyin: 'z«éo', meaning: 'presto'},
            {hanzi: 'Êôö', pinyin: 'w«én', meaning: 'tardi'},
            {hanzi: 'ÂÜ∑', pinyin: 'lƒõng', meaning: 'freddo'},
            {hanzi: 'ÁÉ≠', pinyin: 'r√®', meaning: 'caldo'},
            {hanzi: 'Èõ®', pinyin: 'y«î', meaning: 'pioggia'},
            {hanzi: 'Èõ™', pinyin: 'xuƒõ', meaning: 'neve'},
            {hanzi: 'È£é', pinyin: 'fƒìng', meaning: 'vento'},
            {hanzi: '‰∫ë', pinyin: 'y√∫n', meaning: 'nuvola'}
        ];
        
        let currentCardIndex = 0;
        let correctAnswers = 0;
        let totalAnswered = 0;
        let gameMode = 'hanzi-to-pinyin'; // 'hanzi-to-pinyin', 'pinyin-to-hanzi', 'writing-hanzi', 'writing-pinyin'
        let isFlipped = false;
        let hasAnswered = false;
        
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        function generateOptions(correctAnswer, isHanziMode) {
            const options = [correctAnswer];
            const availableCards = flashcards.filter(card => 
                isHanziMode ? card.hanzi !== correctAnswer : card.pinyin !== correctAnswer
            );
            
            const shuffledCards = shuffleArray(availableCards);
            for (let i = 0; i < 3 && i < shuffledCards.length; i++) {
                options.push(isHanziMode ? shuffledCards[i].hanzi : shuffledCards[i].pinyin);
            }
            
            return shuffleArray(options);
        }
        
        function updateCard() {
            const card = flashcards[currentCardIndex];
            const cardFront = document.getElementById('cardFront');
            const cardBack = document.getElementById('cardBack');
            const optionsContainer = document.getElementById('optionsContainer');
            const writingContainer = document.getElementById('writingContainer');
            const writingPrompt = document.getElementById('writingPrompt');
            const writingInput = document.getElementById('writingInput');
            
            // Reset card flip
            document.getElementById('flashcard').classList.remove('flipped');
            isFlipped = false;
            hasAnswered = false;
            
            // Hide feedback
            const feedback = document.getElementById('feedback');
            feedback.classList.remove('show');
            
            // Disable next button
            document.getElementById('nextBtn').disabled = true;
            
            if (gameMode === 'writing-hanzi' || gameMode === 'writing-pinyin') {
                // Writing mode
                optionsContainer.style.display = 'none';
                writingContainer.style.display = 'block';
                
                if (gameMode === 'writing-hanzi') {
                    cardFront.textContent = card.meaning;
                    cardBack.textContent = card.hanzi;
                    writingPrompt.textContent = `Scrivi l'ideogramma per "${card.meaning}":`;
                    writingInput.placeholder = 'Scrivi l\'ideogramma...';
                } else {
                    cardFront.textContent = card.hanzi;
                    cardBack.textContent = card.pinyin;
                    writingPrompt.textContent = `Scrivi il pinyin per "${card.hanzi}":`;
                    writingInput.placeholder = 'Scrivi il pinyin...';
                }
                
                writingInput.value = '';
                writingInput.className = 'writing-input';
                writingInput.disabled = false;
                document.getElementById('checkBtn').disabled = false;
                
            } else {
                // Multiple choice mode
                optionsContainer.style.display = 'grid';
                writingContainer.style.display = 'none';
                
                if (gameMode === 'hanzi-to-pinyin') {
                    cardFront.textContent = card.hanzi;
                    cardBack.textContent = card.pinyin;
                } else {
                    cardFront.textContent = card.pinyin;
                    cardBack.textContent = card.hanzi;
                }
                
                // Generate new options
                const correctAnswer = gameMode === 'hanzi-to-pinyin' ? card.pinyin : card.hanzi;
                const options = generateOptions(correctAnswer, gameMode === 'pinyin-to-hanzi');
                
                const optionButtons = document.querySelectorAll('.option-btn');
                optionButtons.forEach((btn, index) => {
                    btn.textContent = options[index];
                    btn.className = 'option-btn';
                    btn.disabled = false;
                });
            }
            
            updateProgress();
        }
        
        function updateProgress() {
            document.getElementById('currentCard').textContent = currentCardIndex + 1;
            document.getElementById('correctAnswers').textContent = correctAnswers;
            
            const accuracy = totalAnswered > 0 ? Math.round((correctAnswers / totalAnswered) * 100) : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
            
            const progress = ((currentCardIndex + 1) / flashcards.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }
        
        function flipCard() {
            const flashcard = document.getElementById('flashcard');
            flashcard.classList.toggle('flipped');
            isFlipped = !isFlipped;
        }
        
        function selectAnswer(optionIndex) {
            if (hasAnswered) return;
            
            hasAnswered = true;
            totalAnswered++;
            
            const card = flashcards[currentCardIndex];
            const correctAnswer = gameMode === 'hanzi-to-pinyin' ? card.pinyin : card.hanzi;
            const selectedButton = document.querySelectorAll('.option-btn')[optionIndex];
            const selectedAnswer = selectedButton.textContent;
            
            const feedback = document.getElementById('feedback');
            const optionButtons = document.querySelectorAll('.option-btn');
            
            // Disable all buttons
            optionButtons.forEach(btn => btn.disabled = true);
            
            if (selectedAnswer === correctAnswer) {
                correctAnswers++;
                selectedButton.classList.add('correct');
                feedback.textContent = `Corretto! ${card.hanzi} si pronuncia "${card.pinyin}" e significa "${card.meaning}"`;
                feedback.className = 'feedback correct show';
            } else {
                selectedButton.classList.add('incorrect');
                // Highlight correct answer
                optionButtons.forEach(btn => {
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });
                feedback.textContent = `Sbagliato! La risposta corretta √® "${correctAnswer}". ${card.hanzi} significa "${card.meaning}"`;
                feedback.className = 'feedback incorrect show';
            }
            
            // Enable next button
            document.getElementById('nextBtn').disabled = false;
            
            updateProgress();
        }
        
        function nextCard() {
            if (currentCardIndex < flashcards.length - 1) {
                currentCardIndex++;
                updateCard();
            } else {
                // Game completed
                const feedback = document.getElementById('feedback');
                const accuracy = Math.round((correctAnswers / totalAnswered) * 100);
                feedback.textContent = `Gioco completato! Hai risposto correttamente a ${correctAnswers} su ${totalAnswered} domande (${accuracy}% di precisione)`;
                feedback.className = 'feedback correct show';
                document.getElementById('nextBtn').disabled = true;
            }
        }
        
        function setMode(mode) {
            gameMode = mode;
            
            // Update mode buttons
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateCard();
        }
        
        function checkWritingAnswer() {
            if (hasAnswered) return;
            
            hasAnswered = true;
            totalAnswered++;
            
            const card = flashcards[currentCardIndex];
            const writingInput = document.getElementById('writingInput');
            const userAnswer = writingInput.value.trim();
            const correctAnswer = gameMode === 'writing-hanzi' ? card.hanzi : card.pinyin;
            
            const feedback = document.getElementById('feedback');
            
            // Disable input and check button
            writingInput.disabled = true;
            document.getElementById('checkBtn').disabled = true;
            
            if (userAnswer === correctAnswer) {
                correctAnswers++;
                writingInput.classList.add('correct');
                feedback.textContent = `Corretto! ${card.hanzi} si pronuncia "${card.pinyin}" e significa "${card.meaning}"`;
                feedback.className = 'feedback correct show';
            } else {
                writingInput.classList.add('incorrect');
                feedback.textContent = `Sbagliato! La risposta corretta √® "${correctAnswer}". ${card.hanzi} significa "${card.meaning}"`;
                feedback.className = 'feedback incorrect show';
            }
            
            // Enable next button
            document.getElementById('nextBtn').disabled = false;
            
            updateProgress();
        }
        
        function resetGame() {
            currentCardIndex = 0;
            correctAnswers = 0;
            totalAnswered = 0;
            updateCard();
        }
        
        // Initialize game
        updateCard();
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === ' ') {
                e.preventDefault();
                flipCard();
            } else if (e.key >= '1' && e.key <= '4' && (gameMode === 'hanzi-to-pinyin' || gameMode === 'pinyin-to-hanzi')) {
                const optionIndex = parseInt(e.key) - 1;
                if (!hasAnswered) {
                    selectAnswer(optionIndex);
                }
            } else if (e.key === 'Enter') {
                if (gameMode === 'writing-hanzi' || gameMode === 'writing-pinyin') {
                    if (!hasAnswered && !document.getElementById('checkBtn').disabled) {
                        checkWritingAnswer();
                    } else if (!document.getElementById('nextBtn').disabled) {
                        nextCard();
                    }
                } else if (!document.getElementById('nextBtn').disabled) {
                    nextCard();
                }
            } else if (e.key === 'ArrowRight') {
                if (!document.getElementById('nextBtn').disabled) {
                    nextCard();
                }
            }
        });
        
        // Enable writing input re-activation
        document.addEventListener('DOMContentLoaded', function() {
            const writingInput = document.getElementById('writingInput');
            writingInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !hasAnswered) {
                    checkWritingAnswer();
                }
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96366ddbd6fdbab8',t:'MTc1MzIyMzkxNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
<button class="inline-flex items-center justify-center rounded-md px-4 py-2 text-base text-white font-semibold shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 bg-gradient-to-r from-red-500 to-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 active:transform active:scale-95"><a href="https://scottino2019-glitch.github.io/lingua-cinese/caratteri.html"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
</svg> Indietro </a></button>

</html>
